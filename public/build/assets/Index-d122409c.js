import{T as dt,k as p,m as F,h as d,o as a,f as u,a as l,u as w,w as s,F as V,Z as ut,b as e,i as O,s as ft,p as R,v as B,j as S,c as g,d as x,g as y,N as z,t as N}from"./app-4ab3c1a7.js";import{_ as X}from"./PrimaryButton-0afca82d.js";import{_ as mt}from"./AuthenticatedLayout-0a5f0791.js";import{e as Z}from"./index-63df1496.js";import{I as h}from"./iconify-59ac6911.js";import{_ as G}from"./InputLabel-e21345d2.js";import"./ApplicationLogo-af625855.js";import"./logo-efg-4f53c449.js";import"./_plugin-vue_export-helper-c27b6911.js";const pt=e("div",{class:"tw-text-xl tw-font-title tw-text-gray-800 tw-font-bold"},"Selecione as opções que deseja no filtro abaixo: ",-1),xt={class:"tw-flex tw-flex-1 tw-flex-row tw-gap-4"},_t={class:"tw-flex tw-flex-1 tw-flex-row tw-gap-6"},vt={class:"tw-flex tw-flex-1 tw-flex-col"},bt=e("option",{value:""},"Todos",-1),gt=["value"],yt={class:"tw-flex tw-flex-1 tw-flex-col"},ht=e("div",{class:"tw-text-xl tw-font-title tw-text-gray-800 tw-font-bold tw-text-center"}," Você tem certeza que deseja excluir o(s) registro(s) selecionado(s) definitivamente? ",-1),Ct={class:"tw-flex tw-flex-1 tw-flex-row tw-mt-10"},kt={class:"tw-flex tw-flex-1 flex-row tw-gap-4"},qt={class:"tw-flex tw-flex-1 tw-flex-col"},It={class:"tw-flex tw-flex-1 tw-flex-col tw-justify-start tw-bg-white tw-shadow sm:tw-rounded-lg tw-px-8 tw-py-4 tw-overflow-hidden tw-overflow-y-scroll"},jt={class:"tw-flex md:tw-flex-row tw-flex-col tw-gap-4 tw-py-4 tw-items-center tw-justify-between items tw-border-b-2 tw-border-gray-200"},Mt=e("h4",{class:"tw-text-gray-900 tw-font-title tw-font-semibold"},"Municipios",-1),Ut={class:"tw-flex md:tw-flex-row tw-flex-col md:tw-gap-10 tw-gap-2 tw-mb-8 tw-items-center"},Vt={class:"tw-flex tw-flex-1 tw-flex-row tw-items-center tw-gap-2 md:tw-flex-row tw-pt-5"},At={class:"tw-flex tw-flex-1 tw-flex-col tw-justify-end tw-items-center tw-gap-6 md:tw-flex-row tw-pt-5"},Et={class:"tw-flex tw-flex-1 tw-flex-row tw-gap-5 tw-justify-end tw-items-center"},Ot={class:"tw-flex tw-flex-1 tw-flex-row tw-mt-1 tw-h-[52px] tw-items-center tw-border tw-px-2 tw-w-full tw-border-gray-200 focus:tw-border-gray-300 tw-leading-10 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},Rt={class:"tw-antialiased tw-font-body"},St={class:"tw-py-4 tw-overflow-x-auto"},Nt={class:"tw-flex tw-flex-1 tw-flex-col tw-overflow-hidden"},Lt={class:"tw-font-title tw-text-gray-600 tw-text-lg"},$t={key:0},Dt={class:"tw-flex tw-flex-col tw-gap-2"},Pt=["onClick"],Tt={key:1,class:"tw-font-body tw-text-gray-800 tw-text-base"},Qt={__name:"Index",props:{municipios:{type:Array,default:[]},user:{type:Object,default:{}}},setup(H){const C=H,J=C.user.permissions,I=i=>J.some(o=>o===i),L=dt({id:[],nome:""}),j=p(!1),k=p(!1),A=p(""),$=p({sortBy:"desc",descending:!1,page:1,rowsPerPage:10}),b=p([]),K={year:"numeric",month:"numeric",day:"numeric"};function Q(){j.value=!1}const W=[{name:"id",align:"left",field:"id",label:"ID",sortable:!0},{name:"nome",align:"left",label:"MUNICÍPIO",field:"nome",sortable:!0},{name:"created_at",field:"created_at",required:!0,label:"DATA DE CRIAÇÃO",format:i=>`${new Date(i).toLocaleString("pt-BR",K)}`,align:"left",sortable:!0},{name:"status",field:"situacao",required:!0,label:"Status",align:"left",sortable:!0},{name:"actions",label:"AÇÕES",align:"center",field:"id"}],Y=["id","nome","created_at","status","actions"],_=p(""),v=p(""),M=p(C.municipios),tt=F(()=>v.value!==""),et=F(()=>_.value!=="");function U(){const i=_.value!==""?C.municipios.filter(o=>o.created_at.split("T")[0]===_.value):C.municipios;M.value=v.value!==""?i.filter(o=>o.id===v.value):i,j.value=!1}function ot(){_.value="",U()}function lt(){v.value="",U()}function st(){_.value="",v.value=""}function it(i){L.id=i.id||b.value.map(o=>o.id),L.post(route("painel.municipios.destroy"),{preserveScroll:!0,onSuccess:o=>{z.create({message:"Municipio(s) removido(s) com sucesso.",color:"secondary"}),window.location.href="/municipios",U()},onError:o=>{z.create({message:"Não foi possível remover esse(s) municipio(s).",color:"negative"})}}),k.value=!1}function at(i){b.value=[i],k.value=!0}const nt=()=>{if(b.value.length===0){const i=["ID","NOME DOS MUNICIPIOS","SITUACAO"],o=M.value.map(r=>[r.id,`"${r.nome}"`,r.situacao]),f=`${i.join(",")}
${o.map(r=>r.join(",")).join(`
`)}`,q=new Blob([f],{type:"text/csv;charset=utf-8;"}),m=window.URL.createObjectURL(q),n=document.createElement("a");n.setAttribute("href",m),n.setAttribute("download","MunicipiosExport.csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(m)}else{const i=["ID","NOME DOS MUNICIPIOS","SITUACAO"],o=b.value.map(r=>[r.id,`"${r.nome}"`,r.situacao]),f=`${i.join(",")}
${o.map(r=>r.join(",")).join(`
`)}`,q=new Blob([f],{type:"text/csv;charset=utf-8;"}),m=window.URL.createObjectURL(q),n=document.createElement("a");n.setAttribute("href",m),n.setAttribute("download","MunicipiosExport.csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(m)}};return(i,o)=>{const f=d("q-card-section"),q=d("q-card-actions"),m=d("q-card"),n=d("q-dialog"),r=d("q-chip"),D=d("q-checkbox"),E=d("q-td"),rt=d("q-th"),P=d("q-tr"),ct=d("q-menu"),wt=d("q-table");return a(),u(V,null,[l(w(ut),{title:"Editais"}),l(mt,null,{default:s(()=>[l(n,{modelValue:j.value,"onUpdate:modelValue":o[2]||(o[2]=t=>j.value=t)},{default:s(()=>[l(m,{style:{"min-width":"40vw","max-width":"500px","border-radius":"20px",padding:"40px"}},{default:s(()=>[l(f,null,{default:s(()=>[pt]),_:1}),l(f,{class:"q-p-none"},{default:s(()=>[e("div",xt,[e("div",_t,[e("div",vt,[l(G,{for:"filtroMunicipio",value:"Município"}),O(e("select",{id:"escola","onUpdate:modelValue":o[0]||(o[0]=t=>v.value=t),class:"tw-mt-1 tw-text-gray-700 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-200 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},[bt,(a(!0),u(V,null,R(C.municipios,t=>(a(),u("option",{key:t.id,value:t.id},N(t.nome),9,gt))),128))],512),[[ft,v.value]])]),e("div",yt,[l(G,{for:"filtroCriacao",value:"Município"}),O(e("input",{id:"filtroCriacao","onUpdate:modelValue":o[1]||(o[1]=t=>_.value=t),class:"tw-mt-1 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-500 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm",type:"date"},null,512),[[B,_.value]])])])]),e("div",{class:"tw-flex tw-flex-1 tw-flex-row tw-mt-10"},[e("div",{class:"tw-flex tw-flex-1"},[e("button",{class:"tw-flex tw-px-8 tw-py-3 tw-text-gray-700 tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-white tw-border-2 tw-border-gray-700 tw-justify-center",onClick:st}," LIMPAR FILTROS ")]),e("div",{class:"tw-flex tw-flex-1 flex-row tw-gap-4"},[e("button",{class:"tw-flex tw-flex-1 tw-py-3 tw-text-primary tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-white tw-border-2 tw-border-primary tw-justify-center",onClick:Q}," CANCELAR "),e("button",{class:"tw-flex tw-flex-1 tw-py-3 tw-text-white tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-primary tw-border-2 tw-border-primary tw-justify-center",onClick:U}," APLICAR FILTROS ")])])]),_:1}),l(q,{align:"right"})]),_:1})]),_:1},8,["modelValue"]),l(n,{modelValue:k.value,"onUpdate:modelValue":o[4]||(o[4]=t=>k.value=t)},{default:s(()=>[l(m,{style:{"min-width":"40vw","max-width":"380px","border-radius":"20px",padding:"50px"}},{default:s(()=>[l(f,null,{default:s(()=>[ht]),_:1}),l(f,{class:"q-p-none"},{default:s(()=>[e("div",Ct,[e("div",kt,[e("button",{class:"tw-flex tw-flex-1 tw-py-3 tw-text-primary tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-white tw-border-2 tw-border-primary tw-justify-center",onClick:o[3]||(o[3]=t=>k.value=!1)}," CANCELAR "),e("button",{class:"tw-flex tw-flex-1 tw-py-3 tw-text-white tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-primary tw-border-2 tw-border-primary tw-justify-center",onClick:it}," EXCLUIR ")])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e("div",qt,[e("div",It,[e("div",jt,[Mt,l(w(S),{href:i.route("painel.municipios.create")},{default:s(()=>[I("Criar Municipios")?(a(),g(X,{key:0,class:"tw-text-white tw-bg-green-500 tw-items-center"},{default:s(()=>[l(w(h),{class:"tw-h-6 tw-w-6 tw-text-white tw-mr-2",icon:"icon-park-outline:add"}),x(" ADICIONAR MUNICIPIOS ")]),_:1})):y("",!0)]),_:1},8,["href"])]),e("div",Ut,[e("div",Vt,[tt.value?(a(),g(r,{key:0,icon:w(Z),clickable:"",color:"green",outline:"",size:"lg","text-color":"green",onClick:lt},{default:s(()=>[x(" Municipio ")]),_:1},8,["icon"])):y("",!0),et.value?(a(),g(r,{key:1,icon:w(Z),clickable:"",color:"green",outline:"",size:"lg","text-color":"green",onClick:ot},{default:s(()=>[x(" Data de Criação ")]),_:1},8,["icon"])):y("",!0)]),e("div",At,[e("div",Et,[I("Exportar Municipios")?(a(),u("h5",{key:0,class:"tw-text-gray-700 tw-cursor-pointer tw-flex tw-flex-row tw-text-lg tw-font-body tw-justify-center tw-gap-2",onClick:nt},[l(w(h),{class:"tw-h-6 tw-w-6",icon:"tabler:file-export"}),x(" Exportar CSV ")])):y("",!0)]),e("div",Ot,[l(w(h),{class:"tw-h-6 tw-w-6 tw-text-gray-600",icon:"majesticons:search-line"}),O(e("input",{id:"busca","onUpdate:modelValue":o[5]||(o[5]=t=>A.value=t),autocomplete:"busca",autofocus:"",class:"tw-appearance-none tw-border-none tw-w-full tw-text-gray-700",placeholder:"Pesquise aqui",required:"",type:"text"},null,512),[[B,A.value]])])])]),e("div",Rt,[e("div",St,[e("div",Nt,[l(wt,{pagination:$.value,"onUpdate:pagination":o[6]||(o[6]=t=>$.value=t),rows:M.value,"onUpdate:rows":o[7]||(o[7]=t=>M.value=t),selected:b.value,"onUpdate:selected":o[8]||(o[8]=t=>b.value=t),columns:W,filter:A.value,"pagination-label":(t,c,T)=>`${t} à ${c} de ${T} registros`,"selected-rows-label":t=>t+" registro(s) selecionado(s)","visible-columns":Y,flat:"","no-data-label":"Não há informações cadastradas.","no-results-label":"Não foi possível localizar informações com o filtro inserido.","row-key":"id","rows-per-page-label":"Registros por página",selection:"multiple","wrap-cells":""},{header:s(t=>[l(P,{props:t,class:"tw-h-20"},{default:s(()=>[l(E,{"auto-width":""},{default:s(()=>[l(D,{modelValue:t.selected,"onUpdate:modelValue":c=>t.selected=c,dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),(a(!0),u(V,null,R(t.cols,c=>(a(),g(rt,{key:c.name,props:t},{default:s(()=>[e("span",Lt,N(c.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:s(t=>[l(P,{props:t,class:"roundful tw-overflow-hidden tw-rounded-lg hover:tw-bg-green-100 tw-h-20 tw-transition-colors","no-hover":""},{default:s(()=>[l(E,{"auto-width":""},{default:s(()=>[l(D,{modelValue:t.selected,"onUpdate:modelValue":c=>t.selected=c,dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),(a(!0),u(V,null,R(t.cols,c=>(a(),g(E,{key:c.name,props:t},{default:s(()=>[c.name==="actions"?(a(),u("div",$t,[l(X,{class:"tw-text-black tw-text-lg"},{default:s(()=>[x("... "),l(ct,{"auto-close":""},{default:s(()=>[e("div",Dt,[l(w(S),{href:i.route("painel.municipios.show",t.row.id),class:"tw-flex hover:tw-bg-gray-100 flex-row tw-p-2 z-10 tw-justify-right tw-items-center",title:"Info"},{default:s(()=>[l(w(h),{class:"tw-h-6 tw-w-6",icon:"arcticons:searchbar-ex"}),x("  Visualizar ")]),_:2},1032,["href"]),I("Editar Municipios")?(a(),g(w(S),{key:0,href:i.route("painel.municipios.editar",t.row.id),class:"tw-flex hover:tw-bg-gray-100 flex-row tw-p-2 z-10 tw-justify-right tw-items-center",title:"Editar"},{default:s(()=>[l(w(h),{class:"tw-h-6 tw-w-6",icon:"arcticons:simpletexteditor"}),x("  Editar ")]),_:2},1032,["href"])):y("",!0),I("Excluir Municipios")?(a(),u("span",{key:1,class:"tw-flex hover:tw-bg-gray-100 flex-row tw-p-2 tw-justify-right tw-items-center",title:"Deletar",onClick:T=>at(t.row)},[l(w(h),{class:"tw-h-6 tw-w-6",icon:"arcticons:trashcan"}),x("  Excluir ")],8,Pt)):y("",!0)])]),_:2},1024)]),_:2},1024)])):(a(),u("div",Tt,N(c.value),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["pagination","rows","selected","filter","pagination-label","selected-rows-label"])])])])])])]),_:1})],64)}}};export{Qt as default};
