import{T as at,k as m,m as M,h as w,o as d,f as p,a as l,u as c,w as s,F as y,Z as nt,b as e,i as S,s as rt,p as R,v as $,j as F,d as x,c as h,g as T,N as P,t as U}from"./app-4ab3c1a7.js";import{_ as B}from"./PrimaryButton-0afca82d.js";import{_ as it}from"./AuthenticatedLayout-0a5f0791.js";import{e as z}from"./index-63df1496.js";import{I as g}from"./iconify-59ac6911.js";import{_ as X}from"./InputLabel-e21345d2.js";import"./ApplicationLogo-af625855.js";import"./logo-efg-4f53c449.js";import"./_plugin-vue_export-helper-c27b6911.js";const wt=e("div",{class:"tw-text-xl tw-font-title tw-text-gray-800 tw-font-bold"},"Selecione as opções que deseja no filtro abaixo: ",-1),dt={class:"tw-flex tw-flex-1 tw-flex-row tw-gap-4"},ct={class:"tw-flex tw-flex-1 tw-flex-row tw-gap-6"},ut={class:"tw-flex tw-flex-1 tw-flex-col"},ft=e("option",{value:""},"Todos",-1),mt=["value"],pt={class:"tw-flex tw-flex-1 tw-flex-col"},xt={class:"tw-flex tw-flex-1 tw-flex-row tw-mt-10"},_t={class:"tw-flex tw-flex-1"},vt={class:"tw-flex tw-flex-1 flex-row tw-gap-4"},bt=e("div",{class:"tw-text-xl tw-font-title tw-text-gray-800 tw-font-bold tw-text-center"}," Você tem certeza que deseja excluir o(s) registro(s) selecionado(s) definitivamente? ",-1),gt={class:"tw-flex tw-flex-1 tw-flex-row tw-mt-10"},yt={class:"tw-flex tw-flex-1 flex-row tw-gap-4"},ht={class:"tw-flex tw-flex-1 tw-flex-col"},Ct={class:"tw-flex tw-flex-1 tw-flex-col tw-justify-start tw-bg-white tw-shadow sm:tw-rounded-lg tw-px-8 tw-py-4 tw-overflow-hidden tw-overflow-y-scroll"},kt={class:"tw-flex md:tw-flex-row tw-flex-col tw-gap-4 tw-py-4 tw-items-center tw-justify-between items tw-border-b-2 tw-border-gray-200"},qt=e("h4",{class:"tw-text-gray-900 tw-font-title tw-font-semibold"},"Níveis de Acessos Cadastrados",-1),Vt={class:"tw-flex md:tw-flex-row tw-flex-col md:tw-gap-10 tw-gap-2 tw-mb-8 tw-items-center"},jt={class:"tw-flex tw-flex-1 tw-flex-row tw-items-center tw-gap-2 md:tw-flex-row tw-pt-5"},Et={class:"tw-flex tw-flex-1 tw-flex-col tw-justify-end tw-items-center tw-gap-6 md:tw-flex-row tw-pt-5"},At={class:"tw-flex tw-flex-1 tw-flex-row tw-gap-5 tw-justify-end tw-items-center"},St={class:"tw-flex tw-flex-1 tw-flex-row tw-mt-1 tw-h-[52px] tw-items-center tw-border tw-px-2 tw-w-full tw-border-gray-200 focus:tw-border-gray-300 tw-leading-10 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},Rt={class:"tw-antialiased tw-font-body"},Ut={class:"tw-py-4 tw-overflow-x-auto"},Nt={class:"tw-flex tw-flex-1 tw-flex-col tw-overflow-hidden"},It={class:"tw-font-title tw-text-gray-600 tw-text-lg"},Lt={key:0},Ot={class:"tw-flex tw-flex-col tw-gap-2"},Dt=["onClick"],Mt={key:1,class:"tw-font-body tw-text-gray-800 tw-text-base"},Ht={__name:"Index",props:{permissions:{type:Array,default:[]},roles:{type:Array,default:[]}},setup(Z){const N=Z,C=at({id:[],nome:""}),k=m(!1),v=m(!1),q=m(""),I=m({sortBy:"desc",descending:!1,page:1,rowsPerPage:10}),_=m([]),G={year:"numeric",month:"numeric",day:"numeric"};function H(){k.value=!1}const J=[{name:"id",field:"id",label:"id"},{name:"nome",align:"left",label:"Nome",field:"name",sortable:!0},{name:"created_at",field:"created_at",required:!0,label:"DATA DE CRIAÇÃO",format:a=>`${new Date(a).toLocaleString("pt-BR",G)}`,align:"left",sortable:!0},{name:"actions",label:"AÇÕES",align:"center",field:"id"}],K=["nome","created_at","actions"],V=m(""),j=m(""),E=m(N.roles),Q=M(()=>j.value!=""),W=M(()=>V.value!="");function Y(a){C.id=a.id||_.value.map(o=>o.id),C.post(route("painel.gestao.roles.destroy",C.id),{preserveScroll:!0,onSuccess:o=>{P.create({message:"Permissão(ões) removido(s) com sucesso.",color:"secondary"}),window.location.href="/gestao/roles",applyFilters()},onError:o=>{P.create({message:"Não foi possível remover essas(s) Permissão(ões).",color:"negative"})}}),v.value=!1}function tt(a){_.value=[a],v.value=!0}const et=()=>{if(_.value.length===0){const a=["ID","NOME DOS NÍVEIS DE ACESSO"],o=E.value.map(r=>[r.id,`"${r.name}"`]),u=`${a.join(",")}
${o.map(r=>r.join(",")).join(`
`)}`,b=new Blob([u],{type:"text/csv;charset=utf-8;"}),f=window.URL.createObjectURL(b),n=document.createElement("a");n.setAttribute("href",f),n.setAttribute("download","RolesExport.csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(f)}else{const a=["ID","NOME DOS NÍVEIS DE ACESSO","STATUS"],o=_.value.map(r=>[r.id,`"${r.nome}"`,r.situacao]),u=`${a.join(",")}
${o.map(r=>r.join(",")).join(`
`)}`,b=new Blob([u],{type:"text/csv;charset=utf-8;"}),f=window.URL.createObjectURL(b),n=document.createElement("a");n.setAttribute("href",f),n.setAttribute("download","RolesExport.csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(f)}};return(a,o)=>{const u=w("q-card-section"),b=w("q-card-actions"),f=w("q-card"),n=w("q-dialog"),r=w("q-chip"),L=w("q-checkbox"),A=w("q-td"),ot=w("q-th"),O=w("q-tr"),lt=w("q-menu"),st=w("q-table");return d(),p(y,null,[l(c(nt),{title:"Permissões"}),l(it,null,{default:s(()=>[l(n,{modelValue:k.value,"onUpdate:modelValue":o[4]||(o[4]=t=>k.value=t)},{default:s(()=>[l(f,{style:{"min-width":"40vw","max-width":"500px","border-radius":"20px",padding:"40px"}},{default:s(()=>[l(u,null,{default:s(()=>[wt]),_:1}),l(u,{class:"q-p-none"},{default:s(()=>[e("div",dt,[e("div",ct,[e("div",ut,[l(X,{for:"filtroMunicipio",value:"Município"}),S(e("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>j.value=t),id:"escola",class:"tw-mt-1 tw-text-gray-700 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-200 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},[ft,(d(!0),p(y,null,R(N.municipios,t=>(d(),p("option",{key:t.id,value:t.id},U(t.nome),9,mt))),128))],512),[[rt,j.value]])]),e("div",pt,[l(X,{for:"filtroCriacao",value:"Município"}),S(e("input",{id:"filtroCriacao",type:"date",class:"tw-mt-1 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-500 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm","onUpdate:modelValue":o[1]||(o[1]=t=>V.value=t)},null,512),[[$,V.value]])])])]),e("div",xt,[e("div",_t,[e("button",{onClick:o[2]||(o[2]=(...t)=>a.clearFilters&&a.clearFilters(...t)),class:"tw-flex tw-px-8 tw-py-3 tw-text-gray-700 tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-white tw-border-2 tw-border-gray-700 tw-justify-center"}," LIMPAR FILTROS ")]),e("div",vt,[e("button",{onClick:H,class:"tw-flex tw-flex-1 tw-py-3 tw-text-primary tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-white tw-border-2 tw-border-primary tw-justify-center"}," CANCELAR "),e("button",{onClick:o[3]||(o[3]=(...t)=>a.applyFilters&&a.applyFilters(...t)),class:"tw-flex tw-flex-1 tw-py-3 tw-text-white tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-primary tw-border-2 tw-border-primary tw-justify-center"}," APLICAR FILTROS ")])])]),_:1}),l(b,{align:"right"})]),_:1})]),_:1},8,["modelValue"]),l(n,{modelValue:v.value,"onUpdate:modelValue":o[6]||(o[6]=t=>v.value=t)},{default:s(()=>[l(f,{style:{"min-width":"40vw","max-width":"380px","border-radius":"20px",padding:"50px"}},{default:s(()=>[l(u,null,{default:s(()=>[bt]),_:1}),l(u,{class:"q-p-none"},{default:s(()=>[e("div",gt,[e("div",yt,[e("button",{onClick:o[5]||(o[5]=t=>v.value=!1),class:"tw-flex tw-flex-1 tw-py-3 tw-text-primary tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-white tw-border-2 tw-border-primary tw-justify-center"}," CANCELAR "),e("button",{onClick:Y,class:"tw-flex tw-flex-1 tw-py-3 tw-text-white tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-primary tw-border-2 tw-border-primary tw-justify-center"}," EXCLUIR ")])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e("div",ht,[e("div",Ct,[e("div",kt,[qt,l(c(F),{href:a.route("painel.gestao.roles.create")},{default:s(()=>[l(B,{class:"tw-text-white tw-bg-green-500 tw-items-center"},{default:s(()=>[l(c(g),{icon:"icon-park-outline:add",class:"tw-h-6 tw-w-6 tw-text-white tw-mr-2"}),x(" ADICIONAR NIVEL DE ACESSO ")]),_:1})]),_:1},8,["href"])]),e("div",Vt,[e("div",jt,[Q.value?(d(),h(r,{key:0,size:"lg",icon:c(z),outline:"",clickable:"",onClick:a.removeFilterMunicipio,color:"green","text-color":"green"},{default:s(()=>[x(" Municipio ")]),_:1},8,["icon","onClick"])):T("",!0),W.value?(d(),h(r,{key:1,size:"lg",icon:c(z),outline:"",clickable:"",onClick:a.removeFilterCriacao,color:"green","text-color":"green"},{default:s(()=>[x(" Data de Criação ")]),_:1},8,["icon","onClick"])):T("",!0)]),e("div",Et,[e("div",At,[e("h5",{onClick:et,class:"tw-text-gray-700 tw-cursor-pointer tw-flex tw-flex-row tw-text-lg tw-font-body tw-justify-center tw-gap-2"},[l(c(g),{icon:"tabler:file-export",class:"tw-h-6 tw-w-6"}),x(" Exportar CSV ")])]),e("div",St,[l(c(g),{icon:"majesticons:search-line",class:"tw-h-6 tw-w-6 tw-text-gray-600"}),S(e("input",{id:"busca",type:"text",placeholder:"Pesquise aqui",required:"",autofocus:"",autocomplete:"busca",class:"tw-appearance-none tw-border-none tw-w-full tw-text-gray-700","onUpdate:modelValue":o[7]||(o[7]=t=>q.value=t)},null,512),[[$,q.value]])])])]),e("div",Rt,[e("div",Ut,[e("div",Nt,[l(st,{flat:"","wrap-cells":"",rows:E.value,"onUpdate:rows":o[8]||(o[8]=t=>E.value=t),columns:J,"visible-columns":K,"row-key":"id",filter:q.value,"no-data-label":"Não há informações cadastradas.","no-results-label":"Não foi possível localizar informações com o filtro inserido.","rows-per-page-label":"Registros por página",pagination:I.value,"onUpdate:pagination":o[9]||(o[9]=t=>I.value=t),"pagination-label":(t,i,D)=>`${t} à ${i} de ${D} registros`,"selected-rows-label":t=>t+" registro(s) selecionado(s)",selected:_.value,"onUpdate:selected":o[10]||(o[10]=t=>_.value=t),selection:"multiple"},{header:s(t=>[l(O,{props:t,class:"tw-h-20"},{default:s(()=>[l(A,{"auto-width":""},{default:s(()=>[l(L,{dense:"",modelValue:t.selected,"onUpdate:modelValue":i=>t.selected=i},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),(d(!0),p(y,null,R(t.cols,i=>(d(),h(ot,{key:i.name,props:t},{default:s(()=>[e("span",It,U(i.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:s(t=>[l(O,{props:t,"no-hover":"",class:"roundful tw-overflow-hidden tw-rounded-lg hover:tw-bg-green-100 tw-h-20 tw-transition-colors"},{default:s(()=>[l(A,{"auto-width":""},{default:s(()=>[l(L,{dense:"",modelValue:t.selected,"onUpdate:modelValue":i=>t.selected=i},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),(d(!0),p(y,null,R(t.cols,i=>(d(),h(A,{key:i.name,props:t},{default:s(()=>[i.name==="actions"?(d(),p("div",Lt,[l(B,{class:"tw-text-black tw-text-lg"},{default:s(()=>[x("... "),l(lt,{"auto-close":""},{default:s(()=>[e("div",Ot,[l(c(F),{href:a.route("painel.gestao.roles.editar",t.row.id),title:"Editar",class:"tw-flex hover:tw-bg-gray-100 flex-row tw-p-2 z-10 tw-justify-right tw-items-center"},{default:s(()=>[l(c(g),{icon:"arcticons:simpletexteditor",class:"tw-h-6 tw-w-6"}),x("  Editar ")]),_:2},1032,["href"]),e("span",{onClick:D=>tt(t.row),title:"Deletar",class:"tw-flex hover:tw-bg-gray-100 flex-row tw-p-2 tw-justify-right tw-items-center"},[l(c(g),{icon:"arcticons:trashcan",class:"tw-h-6 tw-w-6"}),x("  Excluir ")],8,Dt)])]),_:2},1024)]),_:2},1024)])):(d(),p("div",Mt,U(i.value),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","filter","pagination","pagination-label","selected-rows-label","selected"])])])])])])]),_:1})],64)}}};export{Ht as default};
