import{_ as X}from"./InputError-8e97e87c.js";import{_ as R}from"./InputLabel-e21345d2.js";import{_ as G}from"./AuthenticatedLayout-0a5f0791.js";import{I as N}from"./iconify-59ac6911.js";import{T as J,k as H,h as E,o as v,f as I,a as w,u as m,w as B,F as S,Z as W,b as f,p as O,d as K,j as Z,O as Q,N as F,t as ee,c as te,g as se}from"./app-4ab3c1a7.js";import"./ApplicationLogo-af625855.js";import"./logo-efg-4f53c449.js";import"./_plugin-vue_export-helper-c27b6911.js";class ie{constructor(t){this.selection={},this.count=0,this._lastActiveKeyword=null,this._lastActiveKeywordIndex=-1,this.value=[],this.setValue(t)}getIndexOfKeyword(t){return this.value.indexOf(t)}get lastActiveKeyword(){return this._lastActiveKeyword}set lastActiveKeyword(t){this._lastActiveKeyword=t,t?(this._lastActiveKeywordIndex=this.getIndexOfKeyword(t),this._lastActiveKeywordIndex<0&&(this._lastActiveKeyword=null)):this._lastActiveKeywordIndex=-1}get lastActiveKeywordIndex(){return this._lastActiveKeywordIndex}set lastActiveKeywordIndex(t){this.value.length>0?(t<0?t=0:t>this.value.length-1&&(t=this.value.length-1),this._lastActiveKeywordIndex=t,this._lastActiveKeyword=this.value[t]):(this._lastActiveKeywordIndex=-1,this._lastActiveKeyword=null)}getFirstSelectedIndex(){if(!this.value)return-1;for(let t=0;t<this.value.length;t++){const s=this.value[t];if(this.selection.hasOwnProperty(s)&&this.selection[s])return t}return-1}getLastSelectedIndex(){if(!this.value)return-1;for(let t=this.value.length-1;t>=0;t--){const s=this.value[t];if(this.selection.hasOwnProperty(s)&&this.selection[s])return t}return-1}setValue(t){if(this.value=t||[],!t)return;const s={};let i=0;t.forEach((o,a)=>{this.selection.hasOwnProperty(o)&&this.selection[o]&&(s[o]=!0,i++)}),this.selection=s,this.count=i}isSelected(t){return this.selection.hasOwnProperty(t)&&this.selection[t]}isSelectedByIndex(t){return t>=this.value.length||t<0?!1:this.isSelected(this.value[t])}selectKeyword(t,s=!1){if(!t)return;const i=s?{...this.selection}:{};i[t]=!0,this.selection=i,this.count=s?this.count+1:1}selectKeywordsArray(t,s=!1){if(t.length===0)return;const i=s?{...this.selection}:{};s||(this.count=0),t.forEach(o=>{i[o]||(i[o]=!0,this.count++)}),this.selection=i}clear(){this.count!==0&&(this.selection={},this.count=0)}selectAll(){const t={};for(let s of this.value)t[s]=!0;this.selection=t,this.count=this.value.length}deselectKeyword(t,s=!1){t&&(s?this.selection.hasOwnProperty(t)&&this.selection[t]&&(this.selection={...this.selection,[t]:!1},this.count--):(this.selection={},this.count=0))}setSelectedState(t,s,i=!1){s?this.selectKeyword(t,i):this.deselectKeyword(t,i)}setSelectedStateByIndex(t,s,i=!1){t>=this.value.length||t<0||(s?this.selectKeyword(this.value[t],i):this.deselectKeyword(this.value[t],i))}selectRangeByIndexes(t,s,i=!1){if(t>s){const r=t;t=s,s=r}const o=i?{...this.selection}:{};let a=i?this.count:0;for(let r=Math.max(t,0);r<=Math.min(s,this.value.length-1);r++)(!o.hasOwnProperty(this.value[r])||!o[this.value[r]])&&(o[this.value[r]]=!0,a++);this.selection=o,this.count=a}getSiblingKeyword(t,s){return s===0?t<this.value.length&&t>=0?this.value[t]:null:s>0?t<this.value.length-1?this.value[t+1]:null:t>0?this.value[t-1]:null}getActiveSiblingKeyword(t){return this.getSiblingKeyword(this.lastActiveKeywordIndex,t)}getSelectionAsArray(){return this.count===0?[]:this.value.filter(t=>this.selection.hasOwnProperty(t)&&this.selection[t])}}function C(e,t){if(!e)return!1;if(e.classList!==void 0){if(e.classList.contains(t))return!0}else{if(e.className===void 0)return!1;if(e.className===t)return!0;if(e.className.split(/\s/).some(i=>i.trim()===t))return!0}return!1}function A(e,t){if(typeof window>"u")return null;for(;e;){if(e===document)return null;if(C(e,t))return e;e=e.parentNode}return null}function j(e){e&&(e.remove!==void 0?e.remove():e.parentNode.removeChild(e))}let D=null;function k(e){if(!window||!window.navigator)return!1;if(!D){const t=window.navigator.userAgent,s=/Edge\/|Trident\/|MSIE /.test(t),i=!s&&/AppleWebKit/.test(t)&&/Mobile\/\w+/.test(t),o=i||/mac/i.test(window.navigator.platform),a=/apple/i.test(window.navigator.vendor),r=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(window.navigator.userAgent);D={ie:s,mac:o,safari:a,ios:i,mobile:r}}return D[e]}function M(e){return k("mac")?e.metaKey:e.ctrlKey}class ${constructor(t,s,i,o){if(!t.$el)throw new Error("ImsKeywordBox interaction context: Master component is not mounted");this.isDragging=o,this.component=t,this.startTime=Date.now(),this.startElement=s.target,this.destroyed=i,this.draggingMyKeywords=[],this.draggingCanvas=null,this.invalidateCache(),this.resetEventHandlers(this.isDragging,!1),this.startPoint=this.getMousePointInfo(s),this.curPoint=this.startPoint}invalidateCache(){this._cacheKeywordsElems=null,this._cacheKeywordsBounds={}}onMouseEnd(t){this.component.isMobile&&t.preventDefault(),this.curPoint=this.getMousePointInfo(t),this.isDragging?t.dataTransfer.dropEffect==="move"&&this.deleteDraggingMyKeywords():this.startElement===t.target&&this.keywordClick(this.curPoint,t),this.destroy()}onMouseUpdate(t){if(this.component.isMobile)return;const s=M(t);if(this.curPoint=this.getMousePointInfo(t),this.isDragging){if(t.dataTransfer.types.includes("text/plain")&&t.preventDefault(),this.component.dragKeywordPosition=this.curPoint.kwdIndex,this.component.dragKeywordIsBegin=!1,this.curPoint.hoverKwdElement){const o=this._getKeywordBounds(this.curPoint.kwdIndex);o&&o.left+o.width/2>t.clientX&&(this.component.dragKeywordIsBegin=!0)}}else if(!this.startPoint.hoverKwdElement){let i=this.startPoint.kwdIndex+this.startPoint.offset;if(this.startPoint.kwdIndex===this.curPoint.kwdIndex)s||(this.component.selectedKeywords.count>0&&this.component.selectedKeywords.clear(),this.component.cursorPosition=i);else{this.component.cursorPosition=-1,i>this.curPoint.kwdIndex&&i--;let o=this.curPoint.kwdIndex;this.curPoint.outside!==0&&o++,this.component.selectedKeywords.lastActiveKeywordIndex=i,this.component.selectedKeywords.selectRangeByIndexes(i,o,s)}}}keywordClick(t,s){if(t.delButton)return;const i=M(s);let o=t.kwdIndex,a=-1,r=this.component.cursorPosition===-1?this.component.selectedKeywords.lastActiveKeywordIndex:this.component.cursorPosition;if(!t.hoverKwdElement){if(!s.shiftKey&&i)return;s.shiftKey?r>t.kwdIndex&&o++:(o=-1,a=t.kwdIndex+t.offset)}let n=s.button===0;if(s.button===2&&(n=this.component.selectedKeywords.count>0),o>=0&&n){if(s.shiftKey)this.component.cursorPosition!==-1&&(o<r&&r--,this.component.selectedKeywords.lastActiveKeywordIndex=r),this.component.selectedKeywords.selectRangeByIndexes(r,o,i);else{const d=this.component.selectedKeywords.isSelectedByIndex(o);if(i)this.component.selectedKeywords.setSelectedStateByIndex(o,!d,!0);else if(!d)this.component.selectedKeywords.setSelectedStateByIndex(o,!0);else if(s.button===0){const c={x:s.clientX,y:s.clientY,kwdIndex:this.curPoint?this.curPoint.kwdIndex:null,kwdElement:null,kwdBounds:null};c.kwdIndex>=0&&(c.kwdElement=this._getHoverKwdElement(c.kwdIndex),c.kwdBounds=this._getKeywordBounds(c.kwdIndex)),this.component.openEditor({click:c})}this.component.selectedKeywords.lastActiveKeywordIndex=o}this.component.cursorPosition=-1}else a!==-1&&(this.component.setCursorPosition(a,t.outside===1),this.component.selectedKeywords.clear())}getMousePointInfo(t){const s={kwdIndex:-1,offset:1,hoverKwdElement:null,outside:0,delButton:!1};if(!this.component.value||this.component.value.length===0)return s;let i=t.target;s.delButton=C(i,"ImsKeywordBox-keyword-delete"),(s.delButton||C(i,"ImsKeywordBox-separator-inside"))&&(i=A(i,"ImsKeywordBox-keyword"),i||(i=t.target)),C(i,"ImsKeywordBox-keyword")&&(i=A(i,"ImsKeywordBox-keyword-wrapper"),i||(i=t.target));const o=C(i,"ImsKeywordBox-keyword-wrapper"),a=C(i,"ImsKeywordBox-separator");return o||a?(s.kwdIndex=parseInt(i.dataset.kwdInd),o?(s.hoverKwdElement=o,s.offset=0):s.offset=1,s):this._findMousePointInfoByCoords(t.clientX,t.clientY)}_findMousePointInfoByCoords(t,s){const i={kwdIndex:this.component.value?this.component.value.length-1:-1,offset:1,hoverKwdElement:null,outside:1},o=this._getLastKeywordBounds();if(!o||s>o.bottom||s>o.top&&t>o.right)return i;const a=this._getFirstKeywordBounds();if(!a)return i;const r=t<o.left;if(s<a.bottom&&r)return i.kwdIndex=-1,i.offset=1,i.outside=-1,i;const n=s-a.top,d=Math.floor(n/a.height);return i.kwdIndex=this._findKeywordEdgeIndex(d,r?-1:1,a.top,a.height)+(r?-1:0),i.offset=1,i.outside=r?-1:1,i}_findKeywordEdgeIndex(t,s,i,o){let a=0,r=this.component.value?this.component.value.length-1:-1;for(;a<=r;){const n=Math.floor((r+a)/2),d=this._getKeywordBounds(n),c=d?Math.round((d.top-i)/o):0,u=this._getKeywordBounds(n+s),h=u?Math.round((u.top-i)/o):c+s;if(c===t&&h===t+s)return n;t<c||t===c&&s===-1?r=n-1:a=n+1}return a}_getHoverKwdElement(t){if(!this._cacheKeywordsElems){if(!this.component.$refs.canvas)return null;this._cacheKeywordsElems=this.component.$refs.canvas.querySelectorAll(".ImsKeywordBox-keyword-wrapper")}return t<0||t>=this._cacheKeywordsElems.length?null:this._cacheKeywordsElems[t]}_getKeywordBounds(t){if(!this._cacheKeywordsBounds.hasOwnProperty(t)){const s=this._getHoverKwdElement(t);if(!s)return null;this._cacheKeywordsBounds[t]=s.getBoundingClientRect()}return this._cacheKeywordsBounds[t]}_getLastKeywordBounds(){return this._getKeywordBounds(this.component.value?this.component.value.length-1:-1)}_getFirstKeywordBounds(){return this._getKeywordBounds(0)}destroy(){this.component.dragKeywordPosition=null,this.component.dragKeywordIsBegin=!1,this.resetEventHandlers(this.isDragging,!0),j(this.draggingCanvas),this.destroyed&&this.destroyed()}makeDragging(){this.isDragging||(this.isDragging=!0,this.resetEventHandlers(!1,!1))}onDragLeave(){this.component.dragKeywordPosition=null,this.component.dragKeywordIsBegin=!1}resetEventHandlers(t,s){this._onMouseEndHandler&&(window.removeEventListener(t?"dragend":"mouseup",this._onMouseEndHandler),this._onMouseEndHandler=null),this._onMouseUpdateHandler&&(this.component.$el&&this.component.$el.removeEventListener(t?"dragover":"mousemove",this._onMouseUpdateHandler),this._onMouseUpdateHandler=null),this._invalidateCacheHandler&&(window.removeEventListener("resize",this._invalidateCacheHandler,{passive:!0}),window.removeEventListener("scroll",this._invalidateCacheHandler,{passive:!0}),this.component.$refs.scroller&&this.component.$refs.scroller.removeEventListener("scroll",this._invalidateCacheHandler),this._invalidateCacheHandler=null),t&&(this.component.$el.removeEventListener("dragleave",this._onDragLeaveHandler),this._onDragLeaveHandler=null),s||(this._onMouseEndHandler=i=>this.onMouseEnd(i),this._onMouseUpdateHandler=i=>this.onMouseUpdate(i),this._invalidateCacheHandler=i=>this.invalidateCache(),window.addEventListener(this.isDragging?"dragend":"mouseup",this._onMouseEndHandler),this.component.$el.addEventListener(this.isDragging?"dragover":"mousemove",this._onMouseUpdateHandler),window.addEventListener("resize",this._invalidateCacheHandler,{passive:!0}),window.addEventListener("scroll",this._invalidateCacheHandler,{passive:!0}),this.component.$refs.scroller.addEventListener("scroll",this._invalidateCacheHandler),this.isDragging&&(this._onDragLeaveHandler=i=>this.onDragLeave(i),this.component.$el.addEventListener("dragleave",this._onDragLeaveHandler)))}deleteDraggingMyKeywords(t=!0,s=void 0){s=s!==void 0?s:this.component.value,s||(s=[]);let i=s;if(this.draggingMyKeywords.length>0){let o=-1;i=[];for(let a=0;a<s.length;a++){const r=s[a];this.draggingMyKeywords.indexOf(r)>=0?o===-1&&(o=a):i.push(r)}this.draggingMyKeywords=[],this.component.cursorPosition=o,t&&this.component.$emit("change",i)}return i}}const oe=100,re=500,ne=10;class ae{constructor(t,s,i){this.component=t,this.destroyed=i,this._moveTextareaToCursor(s),this.selectAllDetectTimeout=null,this.selectAllTry=0,this._runHideTimeout()}_runHideTimeout(){this._hideTimeout=setTimeout(()=>{this._hideTimeout=null,this._hideTextarea()},oe)}_moveTextareaToCursor(t){if(!this.component.$refs.textArea)return;const s=this.component.$el.getBoundingClientRect();this.component.$refs.textArea.style.left=t.clientX-s.left-5+"px",this.component.$refs.textArea.style.top=t.clientY-s.top-5+"px",this.component.$refs.textArea.style.width="10px",this.component.$refs.textArea.style.height="10px",this.component.$refs.textArea.style.zIndex=1e4,this.component.$refs.textArea.focus(),this.component.$refs.textArea.value="";const i=this.component.getSelectionsAsJoinedString();this.component.$refs.textArea.value=i+" ",this.component.$refs.textArea.setSelectionRange(0,i.length),this.selectAllTry=0,this._detectSelectAll()}_detectSelectAll(){this.selectAllTry>=ne||(this.selectAllTry++,setTimeout(()=>{this.component.$refs.textArea&&(this.component.$refs.textArea.selectionEnd===this.component.$refs.textArea.value.length?this.component.selectAll():this._detectSelectAll())},re))}_hideTextarea(){this.component.$refs.textArea&&(this.component.$refs.textArea.style.left=0,this.component.$refs.textArea.style.top=0,this.component.$refs.textArea.style.width=0,this.component.$refs.textArea.style.height=0,this.component.$refs.textArea.style.zIndex=-2)}destroy(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.selectAllDetectTimeout&&clearTimeout(this.selectAllDetectTimeout),this.destroyed&&this.destroyed(),this.component.$refs.textArea&&(this.component.$refs.textArea.value="")}}function le(e){return!e.key||e.altKey||e.ctrlKey||e.metaKey?null:e.key==="Spacebar"?" ":e.key.length===1||e.key.length>1&&/[^a-zA-Z0-9]/.test(e.key)?e.key:null}function de(e){if(e.code!==void 0)return e.code;const t={65:"KeyA",67:"KeyC",86:"KeyV",88:"KeyX",89:"KeyY",90:"KeyZ"};return t.hasOwnProperty(e.which)?t[e.which]:null}function ce(e){return navigator.clipboard.writeText(e).then(null,t=>{const s=document.createElement("textarea");s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="10px",s.style.height="10px",document.body.appendChild(s),s.value=e,s.focus(),s.setSelectionRange(0,s.value.length),document.execCommand("copy"),document.body.removeChild(s)})}var he={name:"ImsKeywordBoxEditor",props:{value:{}},data(){return{rawVal:this.value}},methods:{_updateSize(){if(!this.$refs.hidden||!this.$refs.input)return;this.$refs.hidden.textContent=this.rawVal;const e=this.$refs.hidden.getBoundingClientRect();this.$refs.input.style.width=e.width+"px"},_setValue(e){this.rawVal!==e&&(this.rawVal=e,this._updateSize(),this.$emit("input",e))},_onBlur(){this.$emit("blur")},setCursor(e){this.$refs.input&&this.$refs.input.setSelectionRange(e,e)},focus(){this.$refs.input&&this.$refs.input.focus()},blur(){this.$refs.blur&&this.$refs.blur.blur()},isSelectionAtFirst(){return this.$refs.input.selectionStart===this.$refs.input.selectionEnd&&this.$refs.input.selectionStart===0},isSelectionAtEnd(){return this.$refs.input.selectionStart===this.$refs.input.selectionEnd&&this.$refs.input.selectionStart===this.rawVal.length},_onKeyDown(e){if(this.$refs.input)switch(e.key){case"Enter":case"Escape":e.preventDefault(),this.$emit("command",{command:"commit"});break;case"Tab":e.preventDefault(),this.$emit("command",{command:"move",dir:e.shiftKey?-1:1,cursorAt:0});break;case"ArrowLeft":case"ArrowRight":{const t=e.key==="ArrowLeft"&&this.isSelectionAtFirst(),s=e.key==="ArrowRight"&&this.isSelectionAtEnd();(t||s)&&(e.preventDefault(),this.$emit("command",{command:"move",dir:t?-1:1,cursorAt:s?0:null}));break}case"Backspace":case"Delete":{const t=e.key==="Backspace"&&this.isSelectionAtFirst(),s=e.key==="Delete"&&this.isSelectionAtEnd();(t||s)&&(e.preventDefault(),this.$emit("command",{command:"delSep",dir:t?-1:1}));break}}}},mounted(){this._updateSize()},watch:{value(){this.rawVal!==this.value&&(this.rawVal=this.value,this._updateSize())}}};function q(e,t,s,i,o,a,r,n,d,c){typeof r!="boolean"&&(d=n,n=r,r=!1);const u=typeof s=="function"?s.options:s;e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,o&&(u.functional=!0)),i&&(u._scopeId=i);let h;if(a?(h=function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__<"u"&&(l=__VUE_SSR_CONTEXT__),t&&t.call(this,d(l)),l&&l._registeredComponents&&l._registeredComponents.add(a)},u._ssrRegister=h):t&&(h=r?function(l){t.call(this,c(l,this.$root.$options.shadowRoot))}:function(l){t.call(this,n(l))}),h)if(u.functional){const l=u.render;u.render=function(y,b){return h.call(b),l(y,b)}}else{const l=u.beforeCreate;u.beforeCreate=l?[].concat(l,h):[h]}return s}const ue=typeof navigator<"u"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function Y(e){return(t,s)=>fe(t,s)}let T;const z={};function fe(e,t){const s=ue?t.media||"default":e,i=z[s]||(z[s]={ids:new Set,styles:[]});if(!i.ids.has(e)){i.ids.add(e);let o=t.source;if(t.map&&(o+=`
/*# sourceURL=`+t.map.sources[0]+" */",o+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",t.media&&i.element.setAttribute("media",t.media),T===void 0&&(T=document.head||document.getElementsByTagName("head")[0]),T.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(o),i.element.styleSheet.cssText=i.styles.filter(Boolean).join(`
`);else{const a=i.ids.size-1,r=document.createTextNode(o),n=i.element.childNodes;n[a]&&i.element.removeChild(n[a]),n.length?i.element.insertBefore(r,n[a]):i.element.appendChild(r)}}}const pe=he;var we=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"ImsKeywordBoxEditor"},[s("input",{ref:"input",staticClass:"ImsKeywordBoxEditor-input",attrs:{type:"text"},domProps:{value:e.rawVal},on:{keydown:e._onKeyDown,blur:e._onBlur,input:function(i){return e._setValue(i.target.value)}}}),e._v(" "),s("span",{ref:"hidden",staticClass:"ImsKeywordBoxEditor-hidden"})])},me=[];const ye=function(e){e&&e("data-v-4eaaae34_0",{source:".ImsKeywordBoxEditor{position:relative;display:inline-block}.ImsKeywordBoxEditor-hidden,.ImsKeywordBoxEditor-input{outline:0;border:none;font-size:inherit;font-family:inherit;line-height:inherit;white-space:pre;display:block;padding:0;background:0 0;-webkit-text-size-adjust:none;text-size-adjust:none}.ImsKeywordBoxEditor-hidden{position:absolute;top:0;left:0;visibility:hidden;box-sizing:content-box;padding-right:5px}",map:void 0,media:void 0})},ge=void 0,xe=void 0,_e=!1,ve=q({render:we,staticRenderFns:me},ye,pe,ge,_e,xe,!1,Y,void 0,void 0);class Ke{init(t,s){}push(t){}undo(){}redo(){}}class Ce extends Ke{constructor(t=25){super(),this.size=t,this.history=[],this.pointer=0}init(t,s){this.component=t,this.history=[s]}push(t){this.history=[t,...this.history.slice(this.pointer,this.pointer+this.size)],this.pointer=0}undo(){this.pointer<this.history.length-1&&(this.pointer++,this.component.emitValue(this.history[this.pointer],!1))}redo(){this.pointer>0&&(this.pointer--,this.component.emitValue(this.history[this.pointer],!1))}}const P=100,be=600,U=200;var Ie={name:"ImsKeywordBox",components:{ImsKeywordBoxEditor:ve},props:{value:{},showDeleteButton:{type:Boolean,default:!0},separator:{type:[String,Object],default:", "},splittingRegexp:{type:RegExp,default:()=>/[;,\r\n#]/},preprocessKeyword:{type:Function,default:null},getKeywordClasses:{type:Function,default:null},scrollY:{type:Number,default:0},handleExceptions:{type:Function,default:null},emitValueEvent:{type:String,default:"input"},customizeMultiKeywordDraggingCanvas:{type:Function,default:null},historyController:{type:Object,default:()=>new Ce}},data(){return{selectedKeywords:new ie(this.value),cursorPositionRaw:-1,cursorPositionAfter:!1,interactionContext:null,contextMenuContext:null,highlightDuplicated:null,dragKeywordPosition:null,dragKeywordIsBegin:!1,muteNativeClipboardEventsTime:Date.now()-P,focused:!1,editorPosition:-1,editorInstead:!1,editorValue:null,isMobile:!1,confirmDeleteIndex:null}},computed:{cursorPosition:{get(){return this.cursorPositionRaw},set(e){this.cursorPositionRaw=e,this.cursorPositionAfter=!1}},separatorComp(){const e={isNewLine:!1,text:this.separator,inside:!1,before:!1,first:null,between:null};return this.separator&&typeof this.separator=="object"&&Object.assign(e,this.separator),(e.between===null||!e.inside)&&(e.between=e.inside?" ":e.text),e.isNewLine=e.text===`\r
`,e.first===null&&(e.first=e.text,e.isNewLine?e.first="":e.before&&(e.first=e.first.replace(/^\s+/,""))),e}},methods:{setCursorPosition(e,t){this.cursorPositionRaw=e,this.cursorPositionAfter=t},deleteSelectedKeywords(e=!0,t=void 0){t=t!==void 0?t:this.value,t||(t=[]);let s=t;if(this.selectedKeywords.count>0){let i=-1;s=[];for(let o=0;o<t.length;o++){const a=t[o];this.selectedKeywords.isSelected(a)?i===-1&&(i=o):s.push(a)}this.selectedKeywords.clear(),this.cursorPosition=i,e&&this.emitValue(s)}return s},eraseEofCommand(){let e=this.selectedKeywords.count>0?this.selectedKeywords.getFirstSelectedIndex():this.cursorPosition;e<0&&(e=0);const t=this.value?this.value.slice(0,e):[];this.cursorPosition=t.length,this.selectedKeywords.clear(),this.emitValue(t)},clearCommand(){this.selectedKeywords.clear(),this.cursorPosition=-1,this.emitValue([])},deleteWordFromCursor(e){if(this.cursorPosition>=0){const t=this.value?[...this.value]:[];t.splice(this.cursorPosition+e,1),this.cursorPosition=Math.max(this.cursorPosition+e,0),this.selectedKeywords.clear(),this.emitValue(t)}},getSelectionsAsJoinedString(){const e=this.selectedKeywords.getSelectionAsArray();let t=this.separatorComp.text;this.separatorComp.inside&&(this.separatorComp.before?t=this.separatorComp.between+t:t=t+this.separatorComp.between);let s=e.join(t);return this.separatorComp.before&&(s=this.separatorComp.first+s),s},copyCommand(){return this.selectedKeywords.count>0?ce(this.getSelectionsAsJoinedString()).then(null,e=>{if(!this.handleExceptions||!this.handleExceptions(e))throw e}):Promise.resolve()},cutCommand(){return this.selectedKeywords.count>0?this.copyCommand().then(()=>{this.deleteSelectedKeywords()}):Promise.resolve()},pasteCommand(e,t=void 0,s=null){t=t!==void 0?t:this.value,this.selectedKeywords.count>0&&(t=this.deleteSelectedKeywords(!1)),e?this._pasteCommandImpl(this.cursorPosition,t,e,s):s?s(t):this.emitValue(t)},selectAll(){this.cursorPosition=-1,this.selectedKeywords.selectAll()},focus(){this.$refs.textArea&&this.$refs.textArea.focus()},emitScroll(){this.$refs.scroller&&this.$emit("update:scrollY",this.$refs.scroller.scrollTop)},_pasteCommandImpl(e,t,s,i=null){if(!s)return;e<0&&(e=0),t||(t=[]);const o=t,a=this.splittingRegexp?s.split(this.splittingRegexp):[s];let r=a;if(this.preprocessKeyword){r=[];for(let h=0;h<a.length;h++){const l=this.preprocessKeyword(a[h]);l&&(Array.isArray(l)?r=r.concat(l):r.push(l))}}const n=new Set(o),d=new Set,c=[];let u=null;for(let h=0;h<r.length;h++){const l=this.preprocessKeyword?r[h]:r[h].trim();if(l&&!d.has(l)){if(d.add(l),n.has(l)){u||(u={}),u[l]=Date.now();const p=t.indexOf(l);if(p<e)continue;t=t!==o?t:[...t],t.splice(p,1)}c.push(l)}}if(this.selectedKeywords.clear(),this.cursorPosition=e+c.length,this.selectedKeywords.lastActiveKeywordIndex=this.cursorPosition,c.length!==0||t!==o){const h=[...t];h.splice(e,0,...c),i?i(h):this.emitValue(h)}if(u)if(this.highlightDuplicated)this.highlightDuplicated={...this.highlightDuplicated,...u};else{this.highlightDuplicated=u;const h=()=>{if(!this.highlightDuplicated)return;let l=null;const p=Date.now()-be;for(let y in this.highlightDuplicated)this.highlightDuplicated.hasOwnProperty(y)&&this.highlightDuplicated[y]>p&&(l||(l={}),l[y]=this.highlightDuplicated[y]);this.highlightDuplicated=l,this.highlightDuplicated&&setTimeout(h,U)};setTimeout(h,U)}return c},_onMouseDown(e){A(e.target,"ImsKeywordBox-editor")||(this.$refs.textArea&&(this.isMobile?(this.$refs.textArea.focus(),e.preventDefault()):setTimeout(()=>{this.$refs.textArea&&this.$refs.textArea.focus()},10)),!this.interactionContext&&(this.interactionContext=new $(this,e,()=>this.interactionContext=null,!1)))},_onTextareaFocus(){this.focused=!0,setTimeout(()=>{document.activeElement===this.$refs.textArea&&(this.focused||this.$emit("focus"))},100)},_onTextareaBlur(){if(this.isMobile&&this.interactionContext){this.$refs.textArea.focus();return}this.focused=!1,setTimeout(()=>{document.activeElement!==this.$refs.textArea&&this.focused&&this.$emit("blur")},100)},_onDragStart(e){const t=e.target.dataset.kwdInd;if(t!==void 0&&(this.selectedKeywords.isSelectedByIndex(t)||(this.cursorPosition=-1,this.selectedKeywords.setSelectedStateByIndex(t,!0,!1)),e.dataTransfer.setData("text/plain",this.getSelectionsAsJoinedString()),this.interactionContext?this.interactionContext.isDragging||this.interactionContext.makeDragging():this.interactionContext=new $(this,e,()=>this.interactionContext=null,!0),this.interactionContext.draggingMyKeywords=this.selectedKeywords.getSelectionAsArray(),this.selectedKeywords.count>1)){const s=document.createElement("canvas");if(s.style.position="absolute",s.style.left="-100%",document.body.append(s),this.customizeMultiKeywordDraggingCanvas)this.customizeMultiKeywordDraggingCanvas(s,this.selectedKeywords);else{const i=s.getContext("2d");s.width=24,s.height=15,i.fillStyle="#d7d4f0",i.fillRect(0,0,s.width,s.height),i.fillStyle="#000",i.font="12px "+getComputedStyle(this.$el).fontFamily,i.textBaseline="top",i.textAlign="center",i.fillText(this.selectedKeywords.count,12,3)}e.dataTransfer.setDragImage(s,-20,-10),this.interactionContext.draggingCanvas=s}},_onDragEnter(e){if(A(e.target,"ImsKeywordBox-editor"))return;e.dataTransfer.types.includes("text/plain")&&e.preventDefault(),this.interactionContext?this.interactionContext.isDragging||this.interactionContext.makeDragging():this.interactionContext=new $(this,e,()=>this.interactionContext=null,!0)},_onDrop(e){if(A(e.target,"ImsKeywordBox-editor"))return;const t=e.dataTransfer.getData("text/plain");e.preventDefault();let s=this.value?this.value:[],i=s[this.dragKeywordPosition];if(this.editorPosition>=0&&(this.editorInstead&&(s=[...s],s.splice(this.editorPosition,1)),this.editorPosition=-1),this.interactionContext){if(this.interactionContext.draggingMyKeywords.indexOf(i)>=0){const r=new Set;this.interactionContext.draggingMyKeywords.forEach((u,h)=>{r.add(u)});let n=null,d=0,c=!1;for(let u=0;u<s.length;u++)r.has(s[u])?(n===null&&(n=u,d++),!c&&s[u]===i&&(this.dragKeywordPosition=n-1,this.dragKeywordIsBegin=!1,i=this.dragKeywordPosition>=0?this.value[this.dragKeywordPosition]:null,c=!0)):n=null;if(d===1){this.interactionContext.destroy();return}}s=this.interactionContext.deleteDraggingMyKeywords(!1,s)}let o=i?s.indexOf(i):this.dragKeywordPosition;o<0&&(o=this.dragKeywordPosition);const a=this._pasteCommandImpl(o+(this.dragKeywordIsBegin?0:1),s,t);this.cursorPosition=-1,this.selectedKeywords.selectKeywordsArray(a),this.interactionContext&&this.interactionContext.destroy()},_onTextareaKeyDown(e){let t=!1;const s=le(e);let i=!!s;const o=M(e),a=this.value?this.value:[];switch(e.key){case"Shift":case"Alt":case"AltGraph":case"Control":case"Tab":case"CapsLock":case"Fn":case"FnLock":case"Hyper":case"Meta":case"OS":case"NumLock":case"ScrollLock":case"Scroll":case"Super":case"Symbol":case"SymbolLock":return;case"PageUp":case"PageDown":case"Insert":i=!0;break;case"ArrowUp":case"ArrowDown":{this.selectedKeywords.count>0&&!e.shiftKey&&((e.key==="ArrowDown"?1:-1)>0?this.cursorPosition=this.selectedKeywords.getLastSelectedIndex()+1:this.cursorPosition=this.selectedKeywords.getFirstSelectedIndex(),this.selectedKeywords.clear(),t=!0);break}case"ArrowLeft":case"ArrowRight":{i=!0;const n=e.key==="ArrowRight"?1:-1;if(this.selectedKeywords.count>0){if(o||e.shiftKey){const d=e.shiftKey,c=this.selectedKeywords.getActiveSiblingKeyword(n);c&&(d&&this.selectedKeywords.isSelected(c)?this.selectedKeywords.deselectKeyword(this.selectedKeywords.lastActiveKeyword,!0):this.selectedKeywords.selectKeyword(c,d),this.selectedKeywords.lastActiveKeywordIndex+=n)}else n>0?this.cursorPosition=this.selectedKeywords.getLastSelectedIndex()+1:this.cursorPosition=this.selectedKeywords.getFirstSelectedIndex(),this.selectedKeywords.clear();t=!0}else if(o){if(e.shiftKey){const d=this.selectedKeywords.getSiblingKeyword(this.cursorPosition,n<0?-1:0);d&&(this.selectedKeywords.selectKeyword(d),this.selectedKeywords.lastActiveKeywordIndex=this.cursorPosition+(n<0?-1:0),this.cursorPosition=-1)}else this.cursorPosition=Math.min(Math.max(this.cursorPosition+n,0),a.length);t=!0}else(n<0&&this.cursorPosition===0||n>0&&this.cursorPosition===a.length)&&(t=!0);break}case"Clear":this.clearCommand(),t=!0;break;case"eraseEofCommand":this.eraseEofCommand(),t=!0;break;case"End":case"Home":{const n=e.key==="Home"?0:a.length;if(e.shiftKey){let d=this.selectedKeywords.count>0?this.selectedKeywords.lastActiveKeywordIndex:this.cursorPosition;d>n&&n===0&&this.selectedKeywords.count===0&&d--,this.selectedKeywords.selectRangeByIndexes(d,n,!0),this.selectedKeywords.lastActiveKeywordIndex=n,this.cursorPosition=-1}else this.selectedKeywords.clear(),this.cursorPosition=n;t=!0;break}case"Delete":case"Backspace":i=!0,this.selectedKeywords.count>0&&this.cursorPosition===-1?(this.deleteSelectedKeywords(),t=!0):o&&(this.deleteWordFromCursor(e.key==="Delete"?0:-1),t=!0);break;default:const r=de(e);if(e.key==="Copy"||r==="KeyC"&&o)this.muteNativeClipboardEventsTime=Date.now(),this.copyCommand(),t=!0;else if(e.key==="Cut"||r==="KeyX"&&o)this.muteNativeClipboardEventsTime=Date.now(),this.cutCommand(),t=!0;else if(e.key==="Paste"||r==="KeyV"&&o){this.$refs.textArea&&(this.$refs.textArea.value="");return}else e.key==="Redo"||r==="KeyY"&&o||r==="KeyZ"&&o&&e.shiftKey?(this.historyController&&this.historyController.redo(),t=!0):e.key==="Undo"||r==="KeyZ"&&o?(this.historyController&&this.historyController.undo(),t=!0):r==="KeyA"&&o&&(this.selectAll(),t=!0)}if(t)e.preventDefault(),this.$nextTick(()=>{const r=this.selectedKeywords.count>0?this.selectedKeywords.lastActiveKeywordIndex:this.cursorPosition;if(r<0||!this.$el)return;const n=this.$el.querySelector('.ImsKeywordBox-keyword-wrapper[data-kwd-ind="'+r+'"]');if(n)if(k("ie")||k("safari")||k("ios")){if(!this.$refs.scroller)return;const d=this.$refs.scroller.getBoundingClientRect(),c=n.getBoundingClientRect();c.bottom<d.top+10?(this.$refs.scroller.scrollTop-=d.top-c.bottom+c.height,this.emitScroll()):c.top>d.bottom-10&&(this.$refs.scroller.scrollTop+=c.top-d.bottom+c.height,this.emitScroll())}else n.scrollIntoView({block:"nearest"})});else if(i){let r=this.value?this.value:[];s&&this.selectedKeywords.count>0&&(r=this.deleteSelectedKeywords());const n={keyDownEvent:e};s&&this.cursorPosition===r.length&&r.length>0&&(!this.splittingRegexp||!this.splittingRegexp.test(s))&&(n.appendSeparator=this.separatorComp.text),this.openEditor(n)}},_onTextareaPaste(e){if(e.preventDefault(),this.muteNativeClipboardEventsTime+P>Date.now())return;this.muteNativeClipboardEventsTime=Date.now();const t=(e.originalEvent||e).clipboardData.getData("text/plain");this.pasteCommand(t)},_onTextareaCopy(e){e.preventDefault(),!(this.muteNativeClipboardEventsTime+P>Date.now())&&(this.muteNativeClipboardEventsTime=Date.now(),this.copyCommand())},_onTextareaCut(e){e.preventDefault(),!(this.muteNativeClipboardEventsTime+P>Date.now())&&(this.muteNativeClipboardEventsTime=Date.now(),this.cutCommand())},_onTextareaInput(e){e.preventDefault(),this.selectedKeywords.count>0&&this.deleteSelectedKeywords(),this.openEditor({put:e.data})},deleteKeywordByIndex(e){if(!this.value||this.value.length<=e)return;const t=[...this.value];t.splice(e,1),this.emitValue(t)},openEditor(e){this.editorPosition=this.cursorPosition,this.editorValue=null,this.editorInstead=!!e.instead;let t=e.cursorAt!==null&&e.cursorAt!==void 0?e.cursorAt:null;if(e.put&&(this.editorValue=e.put),e.keyDownEvent)switch(e.keyDownEvent.key){case"ArrowLeft":this.editorInstead=!0,this.editorPosition--,e.keyDownEvent.preventDefault();break;case"ArrowRight":this.editorInstead=!0,e.keyDownEvent.preventDefault(),t=0;break;case"Delete":this.editorInstead=!0,t=0;break;case"Backspace":this.editorInstead=!0,this.editorPosition--;break}e.click&&e.click.kwdIndex>=0&&(this.editorPosition=e.click.kwdIndex,this.editorInstead=!0,t=this._getClickedSymbolPos(e.click)),this.editorInstead&&this.value&&this.editorPosition<this.value.length&&(this.editorValue=this.value[this.editorPosition]),this.selectedKeywords.clear(),this.$nextTick(()=>{const s=Array.isArray(this.$refs.editor)?this.$refs.editor[0]:this.$refs.editor;s&&(s.focus(),t!==null&&s.setCursor(t))})},_getClickedSymbolPos(e){if(!e.kwdElement||!e.kwdElement.cloneNode||!this.$refs.canvas)return 0;const t=e.kwdElement.cloneNode(!0),s=t.querySelector(".ImsKeywordBox-keyword");if(!s)return 0;const i=e.x-e.kwdBounds.left,o=s.textContent.split("");s.innerHTML="",this.$refs.canvas.appendChild(t);const a=t.getBoundingClientRect();let r=0,n=0;for(let d of o){const c=window.document.createElement("span");c.textContent=d,s.appendChild(c);const u=c.getBoundingClientRect();if(u.left+u.width/2-a.left>i)break;(!this.separatorComp.inside||!this.separatorComp.before||n>=this.separatorComp.text.length)&&r++,n++}return j(t),r},_onContextMenu(e){this.contextMenuContext&&this.contextMenuContext.destroy(),this.contextMenuContext=new ae(this,e,()=>this.contextMenuContext=null)},_getKeywordClasses(e,t){const s=this.dragKeywordPosition===null&&this.focused,i=s&&this.cursorPositionRaw===t&&!this.cursorPositionAfter||this.dragKeywordPosition===t&&this.dragKeywordIsBegin||this.dragKeywordPosition===-1&&t===0,o=s&&this.cursorPositionRaw===t+1&&(this.value&&t===this.value.length-1||this.cursorPositionAfter)||this.dragKeywordPosition===t&&!this.dragKeywordIsBegin,a=this.highlightDuplicated&&this.highlightDuplicated.hasOwnProperty(e),r={"state-cursor-before":i,"state-cursor-after":o,"state-cursor-blink":(i||o)&&s,"state-duplicate":a,"state-confirm-delete":this.confirmDeleteIndex===t};if(this.getKeywordClasses){const n=this.getKeywordClasses(e,t);n&&(typeof n=="string"?r[n]=!0:Array.isArray(n)?n.forEach(d=>r[d]=!0):Object.assign(r,n))}return r},emitValue(e,t=!0){t&&this.historyController&&this.historyController.push(e),this.$emit(this.emitValueEvent,e)},_editorCommit(e=void 0,t=null){if(this.editorPosition<0)return;const s=this.editorValue?this.editorValue.trim():"";return this.cursorPosition=this.editorPosition,this.editorInstead&&this.selectedKeywords.setSelectedStateByIndex(this.editorPosition,!0,!1),this.pasteCommand(s,e,t),this.focus(),this.editorPosition=-1,s},_editorCommand(e){switch(e.command){case"commit":this._editorCommit();break;case"move":{let t=this.editorPosition;if(e.dir<0){if(this.editorPosition<=0)return;t--}else{if(!this.value||this.editorPosition>=this.value.length)return;t++}this._editorCommit(),this.cursorPosition=t,this.openEditor({instead:!0,cursorAt:e.cursorAt});break}case"delSep":{if(!this.value)return;let t=this.editorPosition;if(e.dir<0){if(this.editorPosition<=0)return;t--}else if(!this.value||this.editorPosition>=this.value.length)return;let s=this.value;const i=this._editorCommit(s,d=>s=d),o=s[t],a=i?s[t+1]:"",r=i||e.dir<0?o.length:0;this.cursorPosition=t;const n=[...s];i&&n.splice(t+1,1),n[t]=o+a,this.emitValue(n),this.$nextTick(()=>{this.openEditor({instead:!0,cursorAt:r})});break}}},_showBetweenSeparatorBefore(e){return!(!this.value||this.separatorComp.isNewLine||!this.separatorComp.before||e===0&&this.separatorComp.inside)},_showBetweenSeparatorAfter(e){if(!this.value||this.separatorComp.isNewLine)return!1;const t=this.editorPosition===this.value.length;return this.separatorComp.before&&!(t&&e===this.value.length-1)?!1:e<this.value.length-1||t},_showInsideSeparatorBefore(e){return!(!this.value||this.separatorComp.isNewLine||!this.separatorComp.inside||!this.separatorComp.before)},_showInsideSeparatorAfter(e){return!(!this.value||this.separatorComp.isNewLine||!this.separatorComp.inside||this.separatorComp.before)},_onDeleteKeywordButtonClick(e){!this.isMobile||this.confirmDeleteIndex===e?(this.deleteKeywordByIndex(e),this.confirmDeleteIndex=null):(this.confirmDeleteIndex=e,this.selectedKeywords.setSelectedStateByIndex(e,!0))}},created(){this.historyController&&this.historyController.init(this,this.value)},mounted(){this.$refs.scroller&&(this.$refs.scroller.scrollTop=this.scrollY),this.cursorPosition=this.value?this.value.length:0,this.isMobile=k("mobile")},destroyed(){this.interactionContext&&this.interactionContext.destroy(),this.contextMenuContext&&this.contextMenuContext.destroy()},watch:{value(){this.selectedKeywords.setValue(this.value),this.interactionContext&&this.interactionContext.invalidateCache()},historyController(){this.historyController&&this.historyController.init(this,this.value)},scrollY(){this.$refs.scroller&&(this.$refs.scroller.scrollTop=this.scrollY)}}};const Be=Ie;var ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ImsKeywordBox",class:{"state-focus":e.focused},on:{mousedown:e._onMouseDown,dragstart:e._onDragStart,dragenter:e._onDragEnter,drop:e._onDrop,contextmenu:e._onContextMenu}},[s("textarea",{ref:"textArea",staticClass:"ImsKeywordBox-textarea",attrs:{autocorrect:"off",autocapitalize:"off",spellcheck:"false"},on:{keydown:e._onTextareaKeyDown,blur:e._onTextareaBlur,focus:e._onTextareaFocus,paste:e._onTextareaPaste,copy:e._onTextareaCopy,cut:e._onTextareaCut,input:e._onTextareaInput}}),e._v(" "),s("div",{ref:"scroller",staticClass:"ImsKeywordBox-scroller",on:{"&scroll":function(i){return e.emitScroll(i)}}},[s("div",{ref:"canvas",staticClass:"ImsKeywordBox-canvas"},[e.value&&e.value.length>0?[s("span",{staticStyle:{"padding-right":"0.1px"}},[e._l(e.value,function(i,o){return[s("span",{class:e.separatorComp.isNewLine?"ImsKeywordBox-line":"ImsKeywordBox-inline"},[e._showBetweenSeparatorBefore(o)?s("span",{staticClass:"ImsKeywordBox-separator",attrs:{"data-kwd-ind":o-1}},[e._v(e._s(o===0&&!e.separatorComp.inside?e.separatorComp.first:e.separatorComp.between))]):e._e(),e.editorPosition===o?[s("ims-keyword-box-editor",{ref:"editor",refInFor:!0,staticClass:"ImsKeywordBox-editor",on:{blur:e._editorCommit,command:e._editorCommand},model:{value:e.editorValue,callback:function(a){e.editorValue=a},expression:"editorValue"}}),!e.separatorComp.isNewLine&&!e.editorInstead?s("span",{staticClass:"ImsKeywordBox-separator",attrs:{"data-kwd-ind":o}},[e._v(e._s(o===0&&!e.separatorComp.inside&&!e.separatorComp.before?e.separatorComp.first:e.separatorComp.between))]):e._e()]:e._e(),e.editorPosition!==o||!e.editorInstead?s("span",{staticClass:"ImsKeywordBox-keyword-wrapper",class:{"state-highlighted":e.selectedKeywords.isSelected(i)},attrs:{draggable:!e.isMobile,"data-kwd-ind":o}},[s("span",{staticClass:"ImsKeywordBox-keyword",class:e._getKeywordClasses(i,o)},[e._showInsideSeparatorBefore(o)?s("span",{staticClass:"ImsKeywordBox-separator-inside"},[e._v(e._s(o===0?e.separatorComp.first:e.separatorComp.text))]):e._e(),e._v(e._s(i)),e._showInsideSeparatorAfter(o)?s("span",{staticClass:"ImsKeywordBox-separator-inside"},[e._v(e._s(o===0?e.separatorComp.first:e.separatorComp.text))]):e._e(),e.showDeleteButton?s("span",{staticClass:"ImsKeywordBox-keyword-delete",on:{click:function(a){return e._onDeleteKeywordButtonClick(o)}}}):e._e()])]):e._e(),e._showBetweenSeparatorAfter(o)?s("span",{staticClass:"ImsKeywordBox-separator",attrs:{"data-kwd-ind":o}},[e._v(e._s(o===0&&!e.separatorComp.inside&&e.editorPosition!==o?e.separatorComp.first:e.separatorComp.between))]):e._e()],2)]})],2)]:[s("div",{staticClass:"ImsKeywordBox-stub",class:{"state-cursor-after":e.cursorPosition===0&&e.focused||e.dragKeywordPosition===-1,"state-cursor-blink":e.cursorPosition===0&&e.focused&&e.dragKeywordPosition===null}})],e._v(" "),(!e.value||!e.value.length)&&e.editorPosition===0||e.value&&e.editorPosition===e.value.length?s("ims-keyword-box-editor",{ref:"editor",staticClass:"ImsKeywordBox-editor",on:{blur:e._editorCommit,command:e._editorCommand},model:{value:e.editorValue,callback:function(i){e.editorValue=i},expression:"editorValue"}}):e._e()],2)])])},Ae=[];const Pe=function(e){e&&e("data-v-512d45a4_0",{source:`.ImsKeywordBox{border:1px solid #ccc;border-radius:4px;position:relative;cursor:text}.ImsKeywordBox-scroller{padding:0 6px;height:100%;max-height:inherit;min-height:inherit;border-radius:inherit;overflow:auto;overflow-x:hidden;position:relative}.ImsKeywordBox-canvas{display:block;padding:4px 4px 4px 4px;line-height:2em;position:relative;user-select:none;outline:0;min-height:100%;box-sizing:border-box}.ImsKeywordBox-keyword-wrapper{white-space:nowrap;display:inline-block}.ImsKeywordBox-keyword-wrapper.state-highlighted{position:relative}.ImsKeywordBox-keyword-wrapper.state-highlighted>.ImsKeywordBox-keyword{cursor:text}.ImsKeywordBox-keyword-wrapper.state-highlighted:before{content:"";position:absolute;width:100%;height:2em;background:#e9e9e9;left:-4px;top:0;padding-left:4px;padding-right:5px}.ImsKeywordBox.state-focus .ImsKeywordBox-scroller>.ImsKeywordBox-canvas .ImsKeywordBox-keyword-wrapper.state-highlighted:before{background:#d7d4f0}.ImsKeywordBox-keyword-wrapper.state-highlighted{background:#faa}.ImsKeywordBox-textarea{width:0;height:0;overflow:hidden;padding:0;display:block;resize:none;position:absolute;background:0 0;border:none;top:0;left:0;color:transparent;outline:0;opacity:.01;-webkit-text-size-adjust:none;text-size-adjust:none;font-size:1px}.ImsKeywordBox-textarea::-moz-selection,.ImsKeywordBox-textarea::selection{color:transparent}.ImsKeywordBox-keyword{padding:2px 7px;border:1px solid #ccc;border-radius:4px;line-height:1.4em;display:inline-block;white-space:nowrap;cursor:default;background-color:rgba(250,250,250,.7);position:relative}.ImsKeywordBox-keyword.state-cursor-after:after,.ImsKeywordBox-keyword.state-cursor-before:after,.ImsKeywordBox-stub.state-cursor-after:after,.ImsKeywordBox-stub.state-cursor-before:after{content:"";display:block;width:1px;height:29px;background:#000;position:absolute;top:-2px;pointer-events:none}.ImsKeywordBox-keyword.state-cursor-after.state-cursor-blink:after,.ImsKeywordBox-keyword.state-cursor-before.state-cursor-blink:after,.ImsKeywordBox-stub.state-cursor-after.state-cursor-blink:after,.ImsKeywordBox-stub.state-cursor-before.state-cursor-blink:after{animation:ImsKeywordBox-cursor-blink .5s infinite alternate}.ImsKeywordBox-keyword.state-cursor-before:after,.ImsKeywordBox-stub.state-cursor-before:after{left:-5px}.ImsKeywordBox-keyword.state-cursor-after:after{right:-6px}.ImsKeywordBox-keyword.state-duplicate{background-color:#ff9c9c}.ImsKeywordBox-keyword.state-confirm-delete .ImsKeywordBox-keyword-delete{animation:ImsKeywordBox-confirm-delete-blink .5s 2}.ImsKeywordBox-stub{display:inline-block;width:1px;height:1.4em;position:relative}.ImsKeywordBox-stub.state-cursor-after:after{right:0}.ImsKeywordBox-separator{position:relative;display:inline-block;white-space:pre}.ImsKeywordBox-separator:first-child,.ImsKeywordBox-separator:last-child{color:#aaa}.ImsKeywordBox-line{display:block}.ImsKeywordBox-keyword-delete{background:url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m18.011 3.8674-6.0106 6.0106-6.0106-6.0106-2.1212 2.1212 6.0106 6.0106-6.0106 6.0106 2.1212 2.1212 6.0106-6.0106 6.0106 6.0106 2.1212-2.1212-6.0106-6.0106 6.0106-6.0106z'/%3E%3C/svg%3E%0A") no-repeat right center;display:inline-block;width:12px;height:12px;cursor:pointer;background-size:contain;opacity:.5;position:relative;top:1px;margin-left:4px}.ImsKeywordBox-keyword-delete:hover{opacity:1}@keyframes ImsKeywordBox-cursor-blink{0%{opacity:1}49.9%{opacity:1}50%{opacity:0}100%{opacity:0}}@keyframes ImsKeywordBox-confirm-delete-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}`,map:void 0,media:void 0})},Ee=void 0,Se=void 0,De=!1,L=q({render:ke,staticRenderFns:Ae},Pe,Be,Ee,De,Se,!1,Y,void 0,void 0),V=function(t){V.installed||(V.installed=!0,t.component("ImsKeywordBox",L))};L.install=V;const $e={class:"tw-flex tw-flex-1 tw-flex-col"},Te={class:"tw-flex tw-flex-1 tw-flex-col tw-justify-start tw-bg-white tw-shadow sm:tw-rounded-lg tw-px-8 tw-py-4"},Me=f("div",{class:"tw-flex md:tw-flex-row tw-flex-col tw-gap-4 tw-py-4 tw-items-center tw-justify-between items tw-border-b-2 tw-border-gray-200"},[f("h4",{class:"tw-font-title tw-font-semibold"},"Adicionar Areas")],-1),Ve=f("div",{class:"tw-flex md:tw-flex-row tw-flex-col md:tw-gap-10 tw-gap-2 tw-m-2"},[f("p",{class:"tw-flex tw-flex-1 tw-text-green-800 tw-text-lg tw-font-title tw-my-4"},"INFORMAÇÕES BÁSICAS")],-1),Le={class:"tw-flex md:tw-flex-row tw-flex-col md:tw-gap-10 tw-gap-2 tw-m-2 tw-pb-4"},Re={class:"tw-flex tw-flex-1 tw-flex-col"},Ne={class:"tw-grid tw-grid-cols-12"},He={class:"tw-grid tw-grid-row tw-gap-2 tw-m-2 tw-pb-4"},Oe={class:"tw-col-span-4"},Fe={class:"tw-col-span-2 tw-mt-8"},ze={class:"tw-flex tw-justify-end tw-gap-2"},Ze={__name:"Editar",props:{areas:{type:Object,default:{}}},setup(e){const t=e,s=J({id:t.areas.id,nome:t.areas.nome,tags:[]});function i(){const h={nome:"Nome da Escola"};Object.keys(h).forEach(p=>{s[p]?s.errors[p]=null:s.errors[p]=`O campo ${h[p]} é obrigatório`})}function o(){i(),Q.post(route("painel.areas.update",s.id),{_method:"patch",...s},{preserveScroll:!0,onSuccess:h=>{s.reset(),F.create({message:"Dados da Area atualizados com sucesso.",color:"secondary"})},onError:h=>{F.create({message:"Não foi possível atualizar os dados da Area.",color:"negative"})}})}const a=t.areas.subareas.map(h=>h.subarea),r=H([]);function n(h){console.log(h)}const d=()=>{u.value.push({valor:""}),s.inputs=u.value},c=h=>{u.value.splice(h,1)},u=H([{valor:""}]);return(h,l)=>{const p=E("q-input"),y=E("q-chip"),b=E("q-btn");return v(),I(S,null,[w(m(W),{title:"Tipo de Arquivo"}),w(G,null,{default:B(()=>[f("div",$e,[f("div",Te,[Me,Ve,f("div",Le,[f("div",Re,[w(R,{for:"nome",value:"Nome",required:""}),w(p,{outlined:"",id:"nome",type:"text",required:"",autofocus:"",autocomplete:"nome",class:"tw-mt-1 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-500 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm",modelValue:m(s).nome,"onUpdate:modelValue":l[0]||(l[0]=g=>m(s).nome=g)},null,8,["modelValue"]),w(X,{class:"tw-mt-2",message:m(s).errors.nome},null,8,["message"])])]),f("div",Ne,[(v(!0),I(S,null,O(m(a),(g,_)=>(v(),I("div",{key:_,class:"tw-col-span-1"},[w(m(L),{modelValue:m(s).tags,"onUpdate:modelValue":l[1]||(l[1]=x=>m(s).tags=x)},null,8,["modelValue"]),w(y,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=x=>r.value=x),removable:"",onRemove:x=>n(_)},{default:B(()=>[K(ee(g),1)]),_:2},1032,["modelValue","onRemove"])]))),128))]),f("div",He,[(v(!0),I(S,null,O(u.value,(g,_)=>(v(),I("div",{class:"tw-grid tw-grid-cols-12 tw-gap-2",key:_},[f("div",Oe,[w(R,{for:"nome",value:"Sub-área",required:""}),w(p,{outlined:"",modelValue:g.valor,"onUpdate:modelValue":x=>g.valor=x,class:"tw-w-auto"},null,8,["modelValue","onUpdate:modelValue"])]),f("div",Fe,[_>0?(v(),te(b,{key:0,onClick:x=>c(_),class:"tw-w-[1%] tw-bg-red-500 tw-text-white"},{default:B(()=>[K("-")]),_:2},1032,["onClick"])):se("",!0)])]))),128)),w(b,{onClick:d,class:"tw-w-[14%] tw-bg-green-700 tw-text-white tw-rounded-1xl",label:"Adicionar mais"},{default:B(()=>[K("  "),w(m(N),{icon:"gg:add-r",width:"20",height:"20",class:"tw-text-white tw-text-left"}),K("  ")]),_:1})]),f("div",ze,[w(m(Z),{href:h.route("painel.areas"),class:"tw-inline-flex tw-cursor-pointer tw-px-8 tw-py-4 tw-border tw-rounded-md tw-font-body tw-font-semibold tw-text-base tw-uppercase hover:tw-opacity-90 tw-border-primary active:tw-bg-opacity-90 focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-indigo-500 focus:tw-ring-offset-2 tw-transition tw-ease-in-out tw-duration-150 tw-text-primary tw-bg-white tw-items-center"},{default:B(()=>[K(" CANCELAR ")]),_:1},8,["href"]),f("span",{onClick:l[3]||(l[3]=g=>o()),class:"tw-inline-flex tw-cursor-pointer tw-px-8 tw-py-4 tw-border tw-border-transparent tw-rounded-md tw-font-body tw-font-semibold tw-text-base tw-uppercase hover:tw-bg-opacity-90 focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-indigo-500 focus:tw-ring-offset-2 tw-transition tw-ease-in-out tw-duration-150 tw-text-white tw-bg-green-500 tw-items-center"},[w(m(N),{icon:"fluent:save-16-regular",class:"tw-h-6 tw-w-6 tw-text-white tw-mr-2"}),K(" Salvar ")])])])])]),_:1})],64)}}};export{Ze as default};
