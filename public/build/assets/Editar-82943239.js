import{_ as C}from"./InputError-ea1ea5ca.js";import{_ as N}from"./InputLabel-a20d7587.js";import{_ as S}from"./AuthenticatedLayout-50909e50.js";import{I}from"./iconify-9ec0487d.js";import{k as F,T as L,h as d,o as c,f as p,a as l,u as n,w as f,F as u,Z as U,b as o,q as _,j as $,d as b,O as j,N as g}from"./app-2933ccec.js";import"./ApplicationLogo-6533a325.js";import"./logo-efg-4f53c449.js";import"./_plugin-vue_export-helper-c27b6911.js";const O={class:"tw-flex tw-flex-1 tw-flex-col"},T={class:"tw-flex tw-flex-1 tw-flex-col tw-justify-start tw-bg-white tw-shadow sm:tw-rounded-lg tw-px-7 tw-py-4 tw-overflow-hidden tw-overflow-y-scroll"},z=o("div",{class:"tw-flex md:tw-flex-row tw-flex-col tw-gap-4 tw-py-4 tw-items-center tw-justify-between items tw-border-b-2 tw-border-gray-200"},[o("h4",{class:"tw-font-title tw-font-semibold"},"Adicionar Nível de Acesso")],-1),B=o("div",{class:"tw-flex md:tw-flex-row tw-flex-col md:tw-gap-10 tw-gap-2"},[o("p",{class:"tw-flex tw-flex-1 tw-text-green-800 tw-text-lg tw-font-title tw-my-4"},"NÍVEL DE ACESSO")],-1),D={class:"tw-flex md:tw-flex-row tw-flex-col md:tw-gap-10 tw-gap-2"},P={class:"tw-flex tw-flex-1 tw-flex-col"},R=o("div",{class:"tw-flex tw-flex-col tw-m-2"},[o("p",{class:"tw-flex tw-flex-1 tw-text-green-800 tw-text-lg tw-font-title tw-mt-4 tw-border-b-2 tw-border-gray-200"}," PERMISSÕES")],-1),G={class:"tw-flex tw-flex-row tw-text-sm"},M={class:"tw-flex tw-justify-end tw-gap-2 tw-mt-4"},ee={__name:"Editar",props:{permissionsId:{type:Array,default:[]},roles:{type:Object,default:{}},permissionsAll:{type:Array,default:[]}},setup(y){const s=y,x=[{name:"Index",permissions:s.permissionsAll.filter(e=>e.name.includes("Index"))},{name:"Criar",permissions:s.permissionsAll.filter(e=>e.name.includes("Criar"))},{name:"Editar",permissions:s.permissionsAll.filter(e=>e.name.includes("Editar"))},{name:"Excluir",permissions:s.permissionsAll.filter(e=>e.name.includes("Excluir"))},{name:"Importar",permissions:s.permissionsAll.filter(e=>e.name.includes("Importar"))},{name:"Exportar",permissions:s.permissionsAll.filter(e=>e.name.includes("Exportar"))},{name:"Logs",permissions:s.permissionsAll.filter(e=>e.name.includes("Logs"))},{name:"Sidebar",permissions:s.permissionsAll.filter(e=>e.name.includes("Sidebar"))},{name:"Topbar",permissions:s.permissionsAll.filter(e=>e.name.includes("Topbar"))}];x.forEach(e=>{e.selectAll=F(!1)});function v(e){const r=e.permissions.some(a=>!t.permissions.includes(a.id));e.selectAll=r,e.selectAll?t.permissions=[...t.permissions,...e.permissions.map(a=>a.id)]:t.permissions=t.permissions.filter(a=>!e.permissions.some(m=>m.id===a))}const t=L({id:s.roles&&s.roles.id,name:s.roles&&s.roles.name,permissions:s.permissionsId});function h(){["name"].forEach(r=>{t[r]?t.errors[r]=null:t.errors[r]=`${A(r)} é obrigatório`})}function A(e){return e.charAt(0).toUpperCase()+e.slice(1)}function E(){h(),j.post(route("painel.gestao.roles.update",t.id),{_method:"patch",...t},{preserveScroll:!0,onSuccess:e=>{t.reset(),g.create({message:"Dados da permissão foram atualizados com sucesso.",color:"secondary"})},onError:e=>{g.create({message:"Não foi possível atualizar os dados da permissão.",color:"negative"})}})}return(e,r)=>{const a=d("q-input"),m=d("q-checkbox"),V=d("q-card-section"),q=d("q-card");return c(),p(u,null,[l(n(U),{title:"Permissões"}),l(S,null,{default:f(()=>[o("div",O,[o("div",T,[z,B,o("div",D,[o("div",P,[l(N,{for:"name",required:"",value:"Nome dos Níveis de Acesso"}),l(a,{id:"name",modelValue:n(t).name,"onUpdate:modelValue":r[0]||(r[0]=i=>n(t).name=i),autofocus:"",class:"tw-mt-1 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-500 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm",outlined:"",required:""},null,8,["modelValue"]),l(C,{message:n(t).errors.name,class:"tw-mt-2"},null,8,["message"])])]),R,l(q,null,{default:f(()=>[l(V,null,{default:f(()=>[o("div",G,[(c(),p(u,null,_(x,i=>o("div",{key:i.name},[l(m,{modelValue:i.selectAll,"onUpdate:modelValue":w=>i.selectAll=w,label:i.name,onClick:w=>v(i),class:"tw-uppercase"},null,8,["modelValue","onUpdate:modelValue","label","onClick"]),(c(!0),p(u,null,_(i.permissions,w=>(c(),p("div",{key:w.id,class:"tw-ml-3 tw-border-b tw-border-gray-200"},[l(m,{modelValue:n(t).permissions,"onUpdate:modelValue":r[1]||(r[1]=k=>n(t).permissions=k),label:w.name,val:w.id},null,8,["modelValue","label","val"])]))),128))])),64))])]),_:1})]),_:1}),o("div",M,[l(n($),{href:e.route("painel.gestao.roles"),class:"tw-inline-flex tw-cursor-pointer tw-px-8 tw-py-4 tw-border tw-rounded-md tw-font-body tw-font-semibold tw-text-base tw-uppercase hover:tw-opacity-90 tw-border-primary active:tw-bg-opacity-90 focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-indigo-500 focus:tw-ring-offset-2 tw-transition tw-ease-in-out tw-duration-150 tw-text-primary tw-bg-white tw-items-center"},{default:f(()=>[b(" CANCELAR ")]),_:1},8,["href"]),o("span",{class:"tw-inline-flex tw-cursor-pointer tw-px-8 tw-py-4 tw-border tw-border-transparent tw-rounded-md tw-font-body tw-font-semibold tw-text-base tw-uppercase hover:tw-bg-opacity-90 focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-indigo-500 focus:tw-ring-offset-2 tw-transition tw-ease-in-out tw-duration-150 tw-text-white tw-bg-green-500 tw-items-center",onClick:r[2]||(r[2]=i=>E())},[l(n(I),{class:"tw-h-6 tw-w-6 tw-text-white tw-mr-2",icon:"fluent:save-16-regular"}),b(" Salvar ")])])])])]),_:1})],64)}}};export{ee as default};
