import{T as Ut,k as u,m as V,h as p,o as i,f as x,a as l,u as c,w as a,F as j,Z as St,b as e,i as S,v as $,s as B,p as O,j as G,c as v,d,g,N as Q,t as T}from"./app-4ab3c1a7.js";import{_ as W}from"./PrimaryButton-0afca82d.js";import{_ as It}from"./AuthenticatedLayout-0a5f0791.js";import{e as A}from"./index-63df1496.js";import{I}from"./iconify-59ac6911.js";import{_ as R}from"./InputLabel-e21345d2.js";import"./ApplicationLogo-af625855.js";import"./logo-efg-4f53c449.js";import"./_plugin-vue_export-helper-c27b6911.js";const qt=e("div",{class:"tw-text-xl tw-font-title tw-text-gray-800 tw-font-bold"},"Selecione as opções que deseja no filtro abaixo: ",-1),Vt={class:"tw-flex tw-flex-1 tw-flex-row tw-gap-6"},jt={class:"tw-flex tw-flex-1 tw-flex-col tw-gap-4"},At={class:"tw-flex tw-flex-1 tw-flex-col"},Rt={class:"tw-flex tw-flex-1 tw-flex-col"},Lt={class:"tw-flex tw-flex-1 tw-flex-col"},Dt=e("option",{value:""},"Todos",-1),Nt=["value"],Ot={class:"tw-flex tw-flex-1 tw-flex-col tw-gap-4"},Tt={class:"tw-flex tw-flex-1 tw-flex-col"},Mt={class:"tw-flex tw-flex-1 tw-flex-col"},Ft=e("option",{value:""},"Todos",-1),$t=["value"],zt={class:"tw-flex tw-flex-1 tw-flex-col"},Pt=["value"],Bt=e("div",{class:"tw-text-xl tw-font-title tw-text-gray-800 tw-font-bold tw-text-center"}," Você tem certeza que deseja excluir o(s) registro(s) selecionado(s) definitivamente? ",-1),Gt={class:"tw-flex tw-flex-1 tw-flex-row tw-mt-10"},Jt={class:"tw-flex tw-flex-1 flex-row tw-gap-4"},Xt={class:"tw-flex tw-flex-1 tw-flex-col"},Zt={class:"tw-flex tw-flex-1 tw-flex-col tw-justify-start tw-bg-white tw-shadow sm:tw-rounded-lg tw-px-8 tw-py-4 tw-overflow-hidden tw-overflow-y-scroll"},Ht={class:"tw-flex md:tw-flex-row tw-flex-col tw-gap-4 tw-py-4 tw-items-center tw-justify-between items tw-border-b-2 tw-border-gray-200"},Kt=e("h4",{class:"tw-text-gray-900 tw-font-title tw-font-semibold"},"Unidades Cadastradas",-1),Qt={class:"tw-flex md:tw-flex-row tw-flex-col md:tw-gap-10 tw-gap-2 tw-mb-8 tw-items-center"},Wt={class:"tw-flex tw-flex-1 tw-flex-row tw-items-center tw-gap-2 md:tw-flex-row tw-pt-5"},Yt={class:"tw-flex tw-flex-1 tw-flex-col tw-justify-end tw-items-center tw-gap-6 md:tw-flex-row tw-pt-5"},te={class:"tw-flex tw-flex-1 tw-flex-row tw-gap-5 tw-justify-end tw-items-center"},ee={class:"tw-flex tw-flex-1 tw-flex-row tw-mt-1 tw-h-[52px] tw-items-center tw-border tw-px-2 tw-w-full tw-border-gray-200 focus:tw-border-gray-300 tw-leading-10 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},oe={class:"tw-antialiased tw-font-body"},le={class:"tw-py-4 tw-overflow-x-auto"},ae={class:"tw-flex tw-flex-1 tw-flex-col tw-overflow-hidden"},se={class:"tw-font-title tw-text-gray-600 tw-text-lg"},ie={key:0},re={class:"tw-flex tw-flex-col tw-gap-2"},ne=["onClick"],ce={key:1,class:"tw-font-body tw-text-gray-800 tw-text-base"},be={__name:"Index",props:{escolas:{type:Array,default:[]},municipios:{type:Array,default:[]},user:{type:Object,default:{}}},setup(Y){const L=Y,tt=L.user.permissions,M=r=>tt.some(o=>o===r),J=Ut({id:[],nome:""}),D=u(!1),N=u(!1),z=u(""),X=u({sortBy:"desc",descending:!1,page:1,rowsPerPage:10}),q=u([]),et={year:"numeric",month:"numeric",day:"numeric"};function ot(){D.value=!1}const lt=[{name:"id",field:"id",label:"ID",required:!0,align:"left",sortable:!0},{name:"created_at",field:"created_at",label:"DATA DE CRIAÇÃO",format:r=>`${new Date(r).toLocaleString("pt-BR",et)}`,align:"left",sortable:!0},{name:"nome",align:"left",label:"NOME COMPLETO",field:"nome",sortable:!0},{name:"municipio",align:"left",label:"MUNICIPIO",field:"municipio",format:r=>r.nome,sortable:!0},{name:"rede",align:"left",label:"REDE",field:"rede",sortable:!0},{name:"situacao",align:"left",label:"SITUAÇÃO",field:"situacao",sortable:!0},{name:"actions",label:"AÇÕES",align:"center",field:"id"}],at=["id","created_at","nome","municipio","rede","situacao","actions"],y=u(""),h=u(""),C=u(""),k=u(""),E=u(""),U=u(""),F=u(L.escolas),st=V(()=>y.value!==""),it=V(()=>h.value!==""),rt=V(()=>C.value!==""),nt=V(()=>k.value!==""),ct=V(()=>E.value!==""),wt=V(()=>U.value!==""),dt=["COTEC","EFG","GOIAS TEC","JUVENTUDE"],ut=["Ativo","Inativo"];function b(){const r=y.value!==""?L.escolas.filter(s=>s.created_at.split("T")[0]===y.value):L.escolas,o=h.value!==""?r.filter(s=>s.id===h.value):r,f=C.value!==""?o.filter(s=>s.nome.toLowerCase().includes(C.value.toLowerCase())):o,_=k.value!==""?f.filter(s=>k.value===s.municipio_id):f,m=U.value!==""?_.filter(s=>U.value===s.situacao):_;F.value=E.value!==""?m.filter(s=>E.value.toLowerCase()===s.rede.toLowerCase()):m,D.value=!1}function ft(){y.value="",b()}function mt(){h.value="",b()}function pt(){C.value="",b()}function xt(){k.value="",b()}function vt(){E.value="",b()}function gt(){U.value="",b()}function bt(){y.value="",h.value="",U.value="",k.value="",E.value="",C.value=""}function _t(r){J.id=r.id||q.value.map(o=>o.id),J.post(route("painel.escolas.destroy"),{preserveScroll:!0,onSuccess:o=>{Q.create({message:"Unidade(s) removida(s) com sucesso.",color:"secondary"}),window.location.href="/escolas",b()},onError:o=>{Q.create({message:"Não foi possível remover essa(s) Unidade(s).",color:"negative"})}}),N.value=!1}function yt(r){q.value=[r],N.value=!0}const ht=()=>{if(q.value.length===0){const r=["ID","NOME DAS ESCOLAS","STATUS"],o=F.value.map(n=>[n.id,`"${n.nome}"`,n.situacao]),f=`${r.join(",")}
${o.map(n=>n.join(",")).join(`
`)}`,_=new Blob([f],{type:"text/csv;charset=utf-8;"}),m=window.URL.createObjectURL(_),s=document.createElement("a");s.setAttribute("href",m),s.setAttribute("download","EscolasExport.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(m)}else{const r=["ID","NOME DAS ESCOLAS","STATUS"],o=q.value.map(n=>[n.id,`"${n.nome}"`,n.situacao]),f=`${r.join(",")}
${o.map(n=>n.join(",")).join(`
`)}`,_=new Blob([f],{type:"text/csv;charset=utf-8;"}),m=window.URL.createObjectURL(_),s=document.createElement("a");s.setAttribute("href",m),s.setAttribute("download","EscolasExport.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(m)}};return(r,o)=>{const f=p("q-card-section"),_=p("q-card-actions"),m=p("q-card"),s=p("q-dialog"),n=p("q-chip"),Z=p("q-checkbox"),P=p("q-td"),Ct=p("q-th"),H=p("q-tr"),kt=p("q-menu"),Et=p("q-table");return i(),x(j,null,[l(c(St),{title:"Unidades"}),l(It,null,{default:a(()=>[l(s,{modelValue:D.value,"onUpdate:modelValue":o[6]||(o[6]=t=>D.value=t)},{default:a(()=>[l(m,{style:{"min-width":"40vw","max-width":"500px","border-radius":"20px",padding:"40px"}},{default:a(()=>[l(f,null,{default:a(()=>[qt]),_:1}),l(f,{class:"q-p-none"},{default:a(()=>[e("div",Vt,[e("div",jt,[e("div",At,[l(R,{for:"filtroCriacao",value:"Data de Criação"}),S(e("input",{id:"filtroCriacao","onUpdate:modelValue":o[0]||(o[0]=t=>y.value=t),class:"tw-mt-1 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-500 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm",type:"date"},null,512),[[$,y.value]])]),e("div",Rt,[l(R,{for:"filtroNome",value:"Data de Criação"}),S(e("input",{id:"filtroNome","onUpdate:modelValue":o[1]||(o[1]=t=>C.value=t),class:"tw-mt-1 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-500 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm",type:"text"},null,512),[[$,C.value]])]),e("div",Lt,[l(R,{for:"FiltroRede",value:"Rede"}),S(e("select",{id:"escola","onUpdate:modelValue":o[2]||(o[2]=t=>E.value=t),class:"tw-mt-1 tw-text-gray-700 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-200 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},[Dt,(i(),x(j,null,O(dt,t=>e("option",{key:t,value:t},T(t),9,Nt)),64))],512),[[B,E.value]])])]),e("div",Ot,[e("div",Tt,[l(R,{for:"filtroID",value:"ID"}),S(e("input",{id:"filtroID","onUpdate:modelValue":o[3]||(o[3]=t=>h.value=t),class:"tw-mt-1 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-500 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm",type:"text"},null,512),[[$,h.value]])]),e("div",Mt,[l(R,{for:"filtroMunicipio",value:"Município"}),S(e("select",{id:"escola","onUpdate:modelValue":o[4]||(o[4]=t=>k.value=t),class:"tw-mt-1 tw-text-gray-700 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-200 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},[Ft,(i(!0),x(j,null,O(L.municipios,([t,w])=>(i(),x("option",{key:w,value:t.id},T(t.nome),9,$t))),128))],512),[[B,k.value]])]),e("div",zt,[l(R,{for:"filtroSituacao",value:"Situação"}),S(e("select",{id:"escola","onUpdate:modelValue":o[5]||(o[5]=t=>U.value=t),class:"tw-mt-1 tw-text-gray-700 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-200 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},[(i(),x(j,null,O(ut,t=>e("option",{key:t,value:t},T(t),9,Pt)),64))],512),[[B,U.value]])])])]),e("div",{class:"tw-flex tw-flex-1 tw-flex-row tw-mt-10"},[e("div",{class:"tw-flex tw-flex-1"},[e("button",{class:"tw-flex tw-px-8 tw-py-3 tw-text-gray-700 tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-white tw-border-2 tw-border-gray-700 tw-justify-center",onClick:bt}," LIMPAR FILTROS ")]),e("div",{class:"tw-flex tw-flex-1 flex-row tw-gap-4"},[e("button",{class:"tw-flex tw-flex-1 tw-py-3 tw-text-primary tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-white tw-border-2 tw-border-primary tw-justify-center",onClick:ot}," CANCELAR "),e("button",{class:"tw-flex tw-flex-1 tw-py-3 tw-text-white tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-primary tw-border-2 tw-border-primary tw-justify-center",onClick:b}," APLICAR FILTROS ")])])]),_:1}),l(_,{align:"right"})]),_:1})]),_:1},8,["modelValue"]),l(s,{modelValue:N.value,"onUpdate:modelValue":o[8]||(o[8]=t=>N.value=t)},{default:a(()=>[l(m,{style:{"min-width":"40vw","max-width":"380px","border-radius":"20px",padding:"50px"}},{default:a(()=>[l(f,null,{default:a(()=>[Bt]),_:1}),l(f,{class:"q-p-none"},{default:a(()=>[e("div",Gt,[e("div",Jt,[e("button",{class:"tw-flex tw-flex-1 tw-py-3 tw-text-primary tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-white tw-border-2 tw-border-primary tw-justify-center",onClick:o[7]||(o[7]=t=>N.value=!1)}," CANCELAR "),e("button",{class:"tw-flex tw-flex-1 tw-py-3 tw-text-white tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-primary tw-border-2 tw-border-primary tw-justify-center",onClick:_t}," EXCLUIR ")])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e("div",Xt,[e("div",Zt,[e("div",Ht,[Kt,l(c(G),{href:r.route("painel.escolas.create")},{default:a(()=>[M("Criar Escolas")?(i(),v(W,{key:0,class:"tw-text-white tw-bg-green-500 tw-items-center"},{default:a(()=>[l(c(I),{class:"tw-h-6 tw-w-6 tw-text-white tw-mr-2",icon:"icon-park-outline:add"}),d(" ADICIONAR ESCOLAS ")]),_:1})):g("",!0)]),_:1},8,["href"])]),e("div",Qt,[e("div",Wt,[st.value?(i(),v(n,{key:0,icon:c(A),clickable:"",color:"green",outline:"",size:"lg","text-color":"green",onClick:ft},{default:a(()=>[d(" Criacao ")]),_:1},8,["icon"])):g("",!0),it.value?(i(),v(n,{key:1,icon:c(A),clickable:"",color:"green",outline:"",size:"lg","text-color":"green",onClick:mt},{default:a(()=>[d(" ID ")]),_:1},8,["icon"])):g("",!0),rt.value?(i(),v(n,{key:2,icon:c(A),clickable:"",color:"green",outline:"",size:"lg","text-color":"green",onClick:pt},{default:a(()=>[d(" Nome ")]),_:1},8,["icon"])):g("",!0),nt.value?(i(),v(n,{key:3,icon:c(A),clickable:"",color:"green",outline:"",size:"lg","text-color":"green",onClick:xt},{default:a(()=>[d(" Municipio ")]),_:1},8,["icon"])):g("",!0),wt.value?(i(),v(n,{key:4,icon:c(A),clickable:"",color:"green",outline:"",size:"lg","text-color":"green",onClick:gt},{default:a(()=>[d(" Situação ")]),_:1},8,["icon"])):g("",!0),ct.value?(i(),v(n,{key:5,icon:c(A),clickable:"",color:"green",outline:"",size:"lg","text-color":"green",onClick:vt},{default:a(()=>[d(" Rede ")]),_:1},8,["icon"])):g("",!0)]),e("div",Yt,[e("div",te,[e("h5",{class:"tw-text-gray-700 tw-cursor-pointer tw-flex tw-flex-row tw-text-lg tw-font-body tw-justify-center tw-gap-2",onClick:o[9]||(o[9]=t=>D.value=!0)},[l(c(I),{class:"tw-h-6 tw-w-6",icon:"ci:filter"}),d(" Filtrar ")]),M("Exportar Escolas")?(i(),x("h5",{key:0,class:"tw-text-gray-700 tw-cursor-pointer tw-flex tw-flex-row tw-text-lg tw-font-body tw-justify-center tw-gap-2",onClick:ht},[l(c(I),{class:"tw-h-6 tw-w-6",icon:"tabler:file-export"}),d(" Exportar CSV ")])):g("",!0)]),e("div",ee,[l(c(I),{class:"tw-h-6 tw-w-6 tw-text-gray-600",icon:"majesticons:search-line"}),S(e("input",{id:"busca","onUpdate:modelValue":o[10]||(o[10]=t=>z.value=t),autocomplete:"busca",autofocus:"",class:"tw-appearance-none tw-border-none tw-w-full tw-text-gray-700",placeholder:"Pesquise aqui",required:"",type:"text"},null,512),[[$,z.value]])])])]),e("div",oe,[e("div",le,[e("div",ae,[l(Et,{pagination:X.value,"onUpdate:pagination":o[11]||(o[11]=t=>X.value=t),rows:F.value,"onUpdate:rows":o[12]||(o[12]=t=>F.value=t),selected:q.value,"onUpdate:selected":o[13]||(o[13]=t=>q.value=t),columns:lt,filter:z.value,"pagination-label":(t,w,K)=>`${t} à ${w} de ${K} registros`,"selected-rows-label":t=>t+" registro(s) selecionado(s)","visible-columns":at,flat:"","no-data-label":"Não há informações cadastradas.","no-results-label":"Não foi possível localizar informações com o filtro inserido.","row-key":"id","rows-per-page-label":"Registros por página",selection:"multiple","wrap-cells":""},{header:a(t=>[l(H,{props:t,class:"tw-h-20"},{default:a(()=>[l(P,{"auto-width":""},{default:a(()=>[l(Z,{modelValue:t.selected,"onUpdate:modelValue":w=>t.selected=w,dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),(i(!0),x(j,null,O(t.cols,w=>(i(),v(Ct,{key:w.name,props:t},{default:a(()=>[e("span",se,T(w.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(t=>[l(H,{props:t,class:"roundful tw-overflow-hidden tw-rounded-lg hover:tw-bg-green-100 tw-h-20 tw-transition-colors","no-hover":""},{default:a(()=>[l(P,{"auto-width":""},{default:a(()=>[l(Z,{modelValue:t.selected,"onUpdate:modelValue":w=>t.selected=w,dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),(i(!0),x(j,null,O(t.cols,w=>(i(),v(P,{key:w.name,props:t},{default:a(()=>[w.name==="actions"?(i(),x("div",ie,[l(W,{class:"tw-text-black tw-text-lg"},{default:a(()=>[d("... "),l(kt,{"auto-close":""},{default:a(()=>[e("div",re,[l(c(G),{href:r.route("painel.escolas.show",t.row.id),class:"tw-flex hover:tw-bg-gray-100 flex-row tw-p-2 z-10 tw-justify-right tw-items-center",title:"Info"},{default:a(()=>[l(c(I),{class:"tw-h-6 tw-w-6",icon:"arcticons:searchbar-ex"}),d("  Visualizar ")]),_:2},1032,["href"]),M("Editar Escolas")?(i(),v(c(G),{key:0,href:r.route("painel.escolas.editar",t.row.id),class:"tw-flex hover:tw-bg-gray-100 flex-row tw-p-2 z-10 tw-justify-right tw-items-center",title:"Editar"},{default:a(()=>[l(c(I),{class:"tw-h-6 tw-w-6",icon:"arcticons:simpletexteditor"}),d("  Editar ")]),_:2},1032,["href"])):g("",!0),M("Excluir Escolas")?(i(),x("span",{key:1,class:"tw-flex hover:tw-bg-gray-100 flex-row tw-p-2 tw-justify-right tw-items-center",title:"Deletar",onClick:K=>yt(t.row)},[l(c(I),{class:"tw-h-6 tw-w-6",icon:"arcticons:trashcan"}),d("  Excluir ")],8,ne)):g("",!0)])]),_:2},1024)]),_:2},1024)])):(i(),x("div",ce,T(w.value),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["pagination","rows","selected","filter","pagination-label","selected-rows-label"])])])])])])]),_:1})],64)}}};export{be as default};
