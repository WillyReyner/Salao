import{_ as d}from"./InputError-1b7c406d.js";import{_ as u}from"./InputLabel-427b0165.js";import{_ as U}from"./AuthenticatedLayout-0b4545fd.js";import{I as E}from"./iconify-9fabe4c1.js";import{k as m,T as F,m as j,h as f,o as A,f as $,a as o,u as s,w as p,F as D,Z as I,b as a,s as O,j as B,d as x,O as P,N as _}from"./app-846bdf4e.js";import"./ApplicationLogo-00219c91.js";import"./logo-efg-4f53c449.js";import"./_plugin-vue_export-helper-c27b6911.js";const R={class:"tw-flex tw-flex-1 tw-flex-col"},T={class:"tw-flex tw-flex-1 tw-flex-col tw-justify-start tw-bg-white tw-shadow sm:tw-rounded-lg tw-px-8 tw-py-4 tw-overflow-hidden tw-overflow-y-scroll"},z=a("div",{class:"tw-flex md:tw-flex-row tw-flex-col tw-gap-4 tw-py-4 tw-items-center tw-justify-between items tw-border-b-2 tw-border-gray-200"},[a("h4",{class:"tw-font-title tw-font-semibold"}," Editar Usuário ")],-1),L=a("div",{class:"tw-flex md:tw-flex-row tw-flex-col md:tw-gap-10 tw-gap-2 tw-m-2"},[a("p",{class:"tw-flex tw-flex-1 tw-text-green-800 tw-text-lg tw-font-title tw-my-4"}," Dados Pessoais ")],-1),S={class:"tw-flex md:tw-flex-row tw-flex-col md:tw-gap-8 tw-gap-2 tw-m-1 tw-pb-4"},G={class:"tw-flex tw-flex-4 tw-flex-col"},K={class:"q-file-image"},M=["src"],Q={class:"tw-flex tw-flex-1 tw-flex-col"},Z={class:"tw-flex md:tw-flex-row tw-flex-col md:tw-gap-10 tw-gap-2 tw-m-2 tw-pb-14"},H={class:"tw-flex tw-flex-col tw-mr-4 tw-w-3/4"},J={class:"tw-flex tw-flex-col tw-mr-4 tw-w-1/4"},W={class:"tw-flex md:tw-flex-row tw-flex-col md:tw-gap-10 tw-gap-2 tw-m-2"},X={class:"tw-flex tw-flex-1 tw-flex-col"},Y={class:"tw-flex tw-flex-1 tw-flex-col"},ee={class:"tw-flex tw-flex-1 tw-flex-col"},te={class:"tw-flex tw-flex-1 tw-flex-col"},oe={class:"tw-flex tw-justify-end tw-gap-2"},ue={__name:"Editar",props:{usuarios:{type:Array,default:[]},roles:{type:Array,default:[]},permissions:{type:Array,default:[]}},setup(y){const r=y,b=r.roles.map(l=>({label:l.name,value:l.id}));r.permissions.map(l=>({label:l.name,value:l.id})),m(""),m("");const e=F({id:r.usuarios.id,name:r.usuarios.name,cpf:r.usuarios.cpf,email:r.usuarios.email,telefone:r.usuarios.telefone,role:r.usuarios.role,data_nascimento:r.usuarios.data_nascimento?r.usuarios.data_nascimento.split(" ")[0]:"",imagem:null,errors:{name:null}}),v=m("https://t4.ftcdn.net/jpg/04/73/25/49/360_F_473254957_bxG9yf4ly7OBO5I0O5KABlN930GwaMQz.jpg");m(`/storage/+ ${r.usuarios}`);const g=m(null),h=l=>new Promise((t,i)=>{const n=new FileReader;n.readAsDataURL(l),n.onload=()=>t(n.result),n.onerror=c=>i(c)}),V=async l=>{g.value=await h(l),e.imagem=l},q=j(()=>`background-image: url(${g.value||v.value})`);function k(){const l={name:"Nome",cpf:"Cpf",email:"Email",telefone:"Telefone",role:"Perfil do Usuário",data_nascimento:"Data de Nascimento"};Object.keys(l).forEach(i=>{e[i]?e.errors[i]=null:e.errors[i]=`O campo ${l[i]} é obrigatório`})}function N(){k(),P.post(route("painel.gestao.usuarios.update",e.id),{_method:"patch",...e},{preserveScroll:!0,onSuccess:l=>{e.reset(),showModal.value=!1,_.create({message:"Dados do usuário atualizados com sucesso.",color:"secondary"})},onError:l=>{_.create({message:"Não foi possível atualizar os dados do usuário. ",color:"negative"})}})}const C=l=>{const t=l.keyCode||l.which;return t>64&&t<91||t>96&&t<123||t===32||t>191&&t<=255?!0:(l.preventDefault(),!1)};return(l,t)=>{const i=f("q-file"),n=f("q-input"),c=f("q-select");return A(),$(D,null,[o(s(I),{title:"Cursos"}),o(U,null,{default:p(()=>[a("div",R,[a("div",T,[z,L,a("div",S,[a("div",G,[a("div",K,[o(i,{outlined:"","model-value":s(e).imagem,"onUpdate:modelValue":V,accept:".jpg,.png"},{before:p(()=>[a("div",{class:"q-file-image-preview",style:O(q.value)},[a("img",{src:`/storage/${r.usuarios.imagem}`},null,8,M)],4)]),_:1},8,["model-value"])])]),a("div",Q,[a("div",Z,[a("div",H,[o(u,{for:"name",value:"Nome Completo",required:""}),o(n,{onKeypress:C,maxlength:"256",outlined:"",id:"name",modelValue:s(e).name,"onUpdate:modelValue":t[0]||(t[0]=w=>s(e).name=w),class:"tw-mt-1 tw-text-gray-700 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-200 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},null,8,["modelValue"]),o(d,{class:"tw-mt-2",message:s(e).errors.name},null,8,["message"])]),a("div",J,[o(u,{for:"role",value:"Perfil do Usuário",required:""}),o(c,{outlined:"","emit-value":"","map-options":"",options:s(b),id:"role",modelValue:s(e).role,"onUpdate:modelValue":t[1]||(t[1]=w=>s(e).role=w),class:"tw-mt-1 tw-text-gray-700 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-200 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},null,8,["options","modelValue"]),o(d,{class:"tw-mt-2",message:s(e).errors.role},null,8,["message"])])]),a("div",W,[a("div",X,[o(u,{for:"email",value:"Email",required:""}),o(n,{outlined:"",id:"email",maxlength:"80",modelValue:s(e).email,"onUpdate:modelValue":t[2]||(t[2]=w=>s(e).email=w),class:"tw-mt-1 tw-text-gray-700 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-200 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},null,8,["modelValue"]),o(d,{class:"tw-mt-2",message:s(e).errors.email},null,8,["message"])]),a("div",Y,[o(u,{for:"telefone",value:"Telefone",required:""}),o(n,{outlined:"",mask:"(##) #####-####",id:"telefone",modelValue:s(e).telefone,"onUpdate:modelValue":t[3]||(t[3]=w=>s(e).telefone=w),class:"tw-mt-1 tw-text-gray-700 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-200 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},null,8,["modelValue"]),o(d,{class:"tw-mt-2",message:s(e).errors.telefone},null,8,["message"])]),a("div",ee,[o(u,{for:"data_nascimento",value:"Data de Nascimento",required:""}),o(n,{outlined:"",type:"date",id:"data_nascimento",modelValue:s(e).data_nascimento,"onUpdate:modelValue":t[4]||(t[4]=w=>s(e).data_nascimento=w),class:"tw-mt-1 tw-text-gray-700 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-200 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},null,8,["modelValue"]),o(d,{class:"tw-mt-2",message:s(e).errors.data_nascimento},null,8,["message"])]),a("div",te,[o(u,{for:"cpf",value:"CPF",required:""}),o(n,{outlined:"",mask:"###.###.###-##",id:"cpf",modelValue:s(e).cpf,"onUpdate:modelValue":t[5]||(t[5]=w=>s(e).cpf=w),class:"tw-mt-1 tw-text-gray-700 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-200 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},null,8,["modelValue"]),o(d,{class:"tw-mt-2",message:s(e).errors.cpf},null,8,["message"])])])])]),a("div",oe,[o(s(B),{href:l.route("painel.gestao.usuarios"),class:"tw-inline-flex tw-cursor-pointer tw-px-8 tw-py-4 tw-border tw-rounded-md tw-font-body tw-font-semibold tw-text-base tw-uppercase hover:tw-opacity-90 tw-border-primary active:tw-bg-opacity-90 focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-indigo-500 focus:tw-ring-offset-2 tw-transition tw-ease-in-out tw-duration-150 tw-text-primary tw-bg-white tw-items-center"},{default:p(()=>[x(" CANCELAR ")]),_:1},8,["href"]),a("span",{onClick:t[6]||(t[6]=w=>N()),class:"tw-inline-flex tw-cursor-pointer tw-px-8 tw-py-4 tw-border tw-border-transparent tw-rounded-md tw-font-body tw-font-semibold tw-text-base tw-uppercase hover:tw-bg-opacity-90 focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-indigo-500 focus:tw-ring-offset-2 tw-transition tw-ease-in-out tw-duration-150 tw-text-white tw-bg-green-500 tw-items-center"},[o(s(E),{icon:"fluent:save-16-regular",class:"tw-h-6 tw-w-6 tw-text-white tw-mr-2"}),x(" EDITAR ")])])])])]),_:1})],64)}}};export{ue as default};
