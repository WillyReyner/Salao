import{k as x,T as V,h as i,o as c,f as m,a as o,u as l,w,F as h,Z as z,b as s,p as K,q as C,d as f,j as M,O as Z,N as v,t as N}from"./app-2933ccec.js";import{_ as G}from"./InputError-ea1ea5ca.js";import{_ as q}from"./InputLabel-a20d7587.js";import{_ as H}from"./AuthenticatedLayout-50909e50.js";import{I as A}from"./iconify-9ec0487d.js";import"./ApplicationLogo-6533a325.js";import"./logo-efg-4f53c449.js";import"./_plugin-vue_export-helper-c27b6911.js";const J={class:"tw-flex tw-flex-row tw-flex-wrap tw-gap-1"},P={class:"tw-flex tw-justify-end"},Q={class:"tw-flex tw-flex-1 tw-flex-col"},W={class:"tw-flex tw-flex-1 tw-flex-col tw-justify-start tw-bg-white tw-shadow sm:tw-rounded-lg tw-px-8 tw-py-4"},X=s("div",{class:"tw-flex md:tw-flex-row tw-flex-col tw-gap-4 tw-py-4 tw-items-center tw-justify-between items tw-border-b-2 tw-border-gray-200"},[s("h4",{class:"tw-font-title tw-font-semibold"},"Adicionar Areas")],-1),Y=s("div",{class:"tw-flex md:tw-flex-row tw-flex-col md:tw-gap-10 tw-gap-2 tw-m-2"},[s("p",{class:"tw-flex tw-flex-1 tw-text-green-800 tw-text-lg tw-font-title tw-my-4"},"INFORMAÇÕES BÁSICAS")],-1),ee={class:"tw-flex md:tw-flex-col md:tw-gap-4 tw-gap-2 tw-m-2 tw-pb-4"},te={class:"tw-flex tw-flex-1 tw-flex-col"},oe={class:"tw-col-span-12 md:tw-col-span-6 lg:tw-col-span-3"},se={class:"tw-flex tw-justify-end tw-gap-2"},ce={__name:"Editar",props:{areas:{type:Object,default:{}},subAreas:{type:Array,default:[]}},setup(k){const u=k,p=x(!1),_=x([]),g=x([]),d=x(""),a=V({id:u.areas.id,nome:u.areas.nome,subarea:u.areas.area_subareas.length>0?u.areas.area_subareas.map(e=>({label:e.subareas.nome,value:e.subareas.id})):[]}),S=u.subAreas.map(e=>({label:e.nome,value:e.id}));function E(){const e={nome:"Nome da Escola"};Object.keys(e).forEach(n=>{a[n]?a.errors[n]=null:a.errors[n]=`O campo ${e[n]} é obrigatório`})}const F=()=>{d.value.trim()!==""&&(g.value.push(d.value.trim()),d.value="",a.inputs=g.value)},$=e=>{g.value.splice(e,1)};function j(e,t){if(e===""){t(()=>{_.value=S});return}t(()=>{const n=e.toLowerCase();_.value=S.filter(y=>y.label.toLowerCase().indexOf(n)>-1)})}function O(){E(),Z.post(route("painel.areas.update",a.id),{_method:"patch",...a},{preserveScroll:!0,onSuccess:e=>{a.reset(),v.create({message:"Dados da Area atualizados com sucesso.",color:"secondary"})},onError:e=>{v.create({message:"Não foi possível atualizar os dados da Area.",color:"negative"})}})}function T(e){V({id:e}).post(route("painel.areas.subareas.destroy"),{preserveScroll:!0,onSuccess:n=>{v.create({message:"Edital(is) removido(s) com sucesso.",color:"secondary"}),applyFilters()},onError:n=>{v.create({message:"Não foi possível remover esse(s) edital(is).",color:"negative"})}})}return(e,t)=>{const n=i("q-input"),y=i("q-card-section"),I=i("q-card"),L=i("q-dialog"),B=i("q-item-section"),R=i("q-item"),U=i("q-select");return c(),m(h,null,[o(l(z),{title:"Tipo de Arquivo"}),o(H,null,{default:w(()=>[o(L,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=r=>p.value=r)},{default:w(()=>[o(I,{class:"tw-flex tw-flex-1 tw-p-4 tw-gap-5 tw-rounded-2xl"},{default:w(()=>[o(y,{class:"tw-flex tw-flex-1 tw-flex-col tw-gap-5"},{default:w(()=>[s("div",null,[o(q,{for:"nome",value:"Sub-áreas",required:""}),o(n,{outlined:"",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=r=>d.value=r),onKeydown:K(F,["enter"]),placeholder:"Digite uma tag e pressione Enter",class:"tw-mt-1 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-500 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},null,8,["modelValue"])]),s("div",J,[(c(!0),m(h,null,C(k.subAreas,(r,b)=>(c(),m("div",{key:b,class:"tw-flex tw-items-center tw-gap-4 tw-text-base tw-border tw-border-green-800 tw-p-2 tw-rounded-2xl"},[f(N(r.nome)+" ",1),o(l(A),{onClick:D=>T(r.id),icon:"line-md:remove",width:"15",height:"15",class:"tw-text-green-500 tw-cursor-pointer"},null,8,["onClick"])]))),128)),(c(!0),m(h,null,C(g.value,(r,b)=>(c(),m("div",{key:b,class:"tw-flex tw-items-center tw-gap-4 tw-text-base tw-border tw-border-green-800 tw-p-2 tw-rounded-2xl"},[f(N(r)+" ",1),o(l(A),{onClick:D=>$(b),icon:"line-md:remove",width:"15",height:"15",class:"tw-text-green-500 tw-cursor-pointer"},null,8,["onClick"])]))),128))]),s("div",P,[s("span",{onClick:t[1]||(t[1]=r=>p.value=!0),class:"tw-flex tw-justify-center tw-cursor-pointer tw-text-green-800 tw-text-lg tw-border tw-border-green-700 tw-items-center tw-rounded-2xl tw-w-[30%]"}," Salvar ")])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s("div",Q,[s("div",W,[X,Y,s("div",ee,[s("div",te,[o(q,{for:"nome",value:"Nome",required:""}),o(n,{outlined:"",id:"nome",type:"text",required:"",autofocus:"",autocomplete:"nome",class:"tw-mt-1 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-500 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm",modelValue:l(a).nome,"onUpdate:modelValue":t[3]||(t[3]=r=>l(a).nome=r)},null,8,["modelValue"]),o(G,{class:"tw-mt-2",message:l(a).errors.nome},null,8,["message"])]),s("div",oe,[o(q,{for:"subarea",required:"",value:"Subáreas"}),o(U,{modelValue:l(a).subarea,"onUpdate:modelValue":t[4]||(t[4]=r=>l(a).subarea=r),options:_.value,behavior:"menu",class:"tw-mt-1 tw-h-[100%] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-500 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm","input-debounce":"0",multiple:"",outlined:"","use-chips":"","use-input":"",onFilter:j},{"no-option":w(()=>[o(R,null,{default:w(()=>[o(B,{class:"text-grey"},{default:w(()=>[f(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])])]),s("div",se,[s("span",{onClick:t[5]||(t[5]=r=>p.value=!0),class:"tw-inline-flex tw-cursor-pointer tw-px-8 tw-py-4 tw-border tw-border-transparent tw-rounded-md tw-font-body tw-font-semibold tw-text-base tw-uppercase hover:tw-bg-opacity-90 focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-indigo-500 focus:tw-ring-offset-2 tw-transition tw-ease-in-out tw-duration-150 tw-text-white tw-bg-green-500 tw-items-center"}," Abrir modal "),o(l(M),{href:e.route("painel.areas"),class:"tw-inline-flex tw-cursor-pointer tw-px-8 tw-py-4 tw-border tw-rounded-md tw-font-body tw-font-semibold tw-text-base tw-uppercase hover:tw-opacity-90 tw-border-primary active:tw-bg-opacity-90 focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-indigo-500 focus:tw-ring-offset-2 tw-transition tw-ease-in-out tw-duration-150 tw-text-primary tw-bg-white tw-items-center"},{default:w(()=>[f(" CANCELAR ")]),_:1},8,["href"]),s("span",{onClick:t[6]||(t[6]=r=>O()),class:"tw-inline-flex tw-cursor-pointer tw-px-8 tw-py-4 tw-border tw-border-transparent tw-rounded-md tw-font-body tw-font-semibold tw-text-base tw-uppercase hover:tw-bg-opacity-90 focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-indigo-500 focus:tw-ring-offset-2 tw-transition tw-ease-in-out tw-duration-150 tw-text-white tw-bg-green-500 tw-items-center"},[o(l(A),{icon:"fluent:save-16-regular",class:"tw-h-6 tw-w-6 tw-text-white tw-mr-2"}),f(" Salvar ")])])])])]),_:1})],64)}}};export{ce as default};
