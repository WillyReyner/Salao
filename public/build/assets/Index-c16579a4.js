import{T as at,k as m,m as O,h as d,o as c,f as x,a as o,u as w,w as l,F as h,Z as nt,b as e,i as S,s as it,p as U,v as D,j as A,d as p,c as y,g as F,N as B,t as I}from"./app-4ab3c1a7.js";import{_ as T}from"./PrimaryButton-0afca82d.js";import{_ as rt}from"./AuthenticatedLayout-0a5f0791.js";import{e as z}from"./index-63df1496.js";import{I as v}from"./iconify-59ac6911.js";import{_ as X}from"./InputLabel-e21345d2.js";import"./ApplicationLogo-af625855.js";import"./logo-efg-4f53c449.js";import"./_plugin-vue_export-helper-c27b6911.js";const wt=e("div",{class:"tw-text-xl tw-font-title tw-text-gray-800 tw-font-bold"},"Selecione as opções que deseja no filtro abaixo: ",-1),dt={class:"tw-flex tw-flex-1 tw-flex-row tw-gap-4"},ct={class:"tw-flex tw-flex-1 tw-flex-row tw-gap-6"},ut={class:"tw-flex tw-flex-1 tw-flex-col"},ft=e("option",{value:""},"Todos",-1),mt=["value"],pt={class:"tw-flex tw-flex-1 tw-flex-col"},xt={class:"tw-flex tw-flex-1 tw-flex-row tw-mt-10"},_t={class:"tw-flex tw-flex-1"},vt={class:"tw-flex tw-flex-1 flex-row tw-gap-4"},gt=e("div",{class:"tw-text-xl tw-font-title tw-text-gray-800 tw-font-bold tw-text-center"}," Você tem certeza que deseja excluir o(s) registro(s) selecionado(s) definitivamente? ",-1),bt={class:"tw-flex tw-flex-1 tw-flex-row tw-mt-10"},ht={class:"tw-flex tw-flex-1 flex-row tw-gap-4"},yt={class:"tw-flex tw-flex-1 tw-flex-col"},Ct={class:"tw-flex tw-flex-1 tw-flex-col tw-justify-start tw-bg-white tw-shadow sm:tw-rounded-lg tw-px-8 tw-py-4 tw-overflow-hidden tw-overflow-y-scroll"},kt={class:"tw-flex md:tw-flex-row tw-flex-col tw-gap-4 tw-py-4 tw-items-center tw-justify-between items tw-border-b-2 tw-border-gray-200"},qt=e("h4",{class:"tw-text-gray-900 tw-font-title tw-font-semibold"},"Permissões Cadastradas",-1),jt={class:"tw-flex md:tw-flex-row tw-flex-col md:tw-gap-10 tw-gap-2 tw-mb-8 tw-items-center"},Vt={class:"tw-flex tw-flex-1 tw-flex-row tw-items-center tw-gap-2 md:tw-flex-row tw-pt-5"},Et={class:"tw-flex tw-flex-1 tw-flex-col tw-justify-end tw-items-center tw-gap-6 md:tw-flex-row tw-pt-5"},Rt={class:"tw-flex tw-flex-1 tw-flex-row tw-gap-5 tw-justify-end tw-items-center"},St={class:"tw-flex tw-flex-1 tw-flex-row tw-mt-1 tw-h-[52px] tw-items-center tw-border tw-px-2 tw-w-full tw-border-gray-200 focus:tw-border-gray-300 tw-leading-10 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},Ut={class:"tw-antialiased tw-font-body"},At={class:"tw-py-4 tw-overflow-x-auto"},It={class:"tw-flex tw-flex-1 tw-flex-col tw-overflow-hidden"},Mt={class:"tw-font-title tw-text-gray-600 tw-text-lg"},Lt={key:0},Nt={class:"tw-flex tw-flex-col tw-gap-2"},Pt=["onClick"],$t={key:1,class:"tw-font-body tw-text-gray-800 tw-text-base"},Ht={__name:"Index",props:{permissions:{type:Array,default:[]}},setup(Z){const M=Z,C=at({id:[],nome:""}),k=m(!1),g=m(!1),q=m(""),L=m({rowsPerPage:10,page:1,sortBy:"created_at",descending:!1,pagesNumber:7,icons:{first:"navigate_before",prev:"chevron_left",next:"chevron_right",last:"navigate_next"},visible:!0}),_=m([]),G={year:"numeric",month:"numeric",day:"numeric"};function H(){k.value=!1}const J=[{name:"id",field:"id",label:"id"},{name:"nome",align:"left",label:"Nome",field:"name",sortable:!0},{name:"created_at",field:"created_at",required:!0,label:"DATA DE CRIAÇÃO",format:a=>`${new Date(a).toLocaleString("pt-BR",G)}`,align:"left",sortable:!0},{name:"actions",label:"AÇÕES",align:"center",field:"id"}],K=["nome","created_at","actions"],j=m(""),V=m(""),E=m(M.permissions),Q=O(()=>V.value!=""),W=O(()=>j.value!="");function Y(a){C.id=a.id||_.value.map(s=>s.id),C.post(route("painel.gestao.permissoes.destroy",C.id),{preserveScroll:!0,onSuccess:s=>{B.create({message:"Permissão(ões) removido(s) com sucesso.",color:"secondary"}),window.location.href="/gestao/permissoes",applyFilters()},onError:s=>{B.create({message:"Não foi possível remover essas(s) Permissão(ões).",color:"negative"})}}),g.value=!1}function tt(a){_.value=[a],g.value=!0}const et=()=>{if(_.value.length===0){const a=["ID","NOME DAS PERMISSÕES"],s=E.value.map(i=>[i.id,`"${i.name}"`]),u=`${a.join(",")}
${s.map(i=>i.join(",")).join(`
`)}`,b=new Blob([u],{type:"text/csv;charset=utf-8;"}),f=window.URL.createObjectURL(b),n=document.createElement("a");n.setAttribute("href",f),n.setAttribute("download","PermissionsExport.csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(f)}else{const a=["ID","NOME DAS PERMISSÕES"],s=_.value.map(i=>[i.id,`"${i.nome}"`]),u=`${a.join(",")}
${s.map(i=>i.join(",")).join(`
`)}`,b=new Blob([u],{type:"text/csv;charset=utf-8;"}),f=window.URL.createObjectURL(b),n=document.createElement("a");n.setAttribute("href",f),n.setAttribute("download","PermissionsExport.csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(f)}};return(a,s)=>{const u=d("q-card-section"),b=d("q-card-actions"),f=d("q-card"),n=d("q-dialog"),i=d("q-chip"),N=d("q-checkbox"),R=d("q-td"),ot=d("q-th"),P=d("q-tr"),st=d("q-menu"),lt=d("q-table");return c(),x(h,null,[o(w(nt),{title:"Permissões"}),o(rt,null,{default:l(()=>[o(n,{modelValue:k.value,"onUpdate:modelValue":s[4]||(s[4]=t=>k.value=t)},{default:l(()=>[o(f,{style:{"min-width":"40vw","max-width":"500px","border-radius":"20px",padding:"40px"}},{default:l(()=>[o(u,null,{default:l(()=>[wt]),_:1}),o(u,{class:"q-p-none"},{default:l(()=>[e("div",dt,[e("div",ct,[e("div",ut,[o(X,{for:"filtroMunicipio",value:"Município"}),S(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>V.value=t),id:"escola",class:"tw-mt-1 tw-text-gray-700 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-200 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm"},[ft,(c(!0),x(h,null,U(M.municipios,t=>(c(),x("option",{key:t.id,value:t.id},I(t.nome),9,mt))),128))],512),[[it,V.value]])]),e("div",pt,[o(X,{for:"filtroCriacao",value:"Município"}),S(e("input",{id:"filtroCriacao",type:"date",class:"tw-mt-1 tw-h-[52px] tw-block tw-w-full tw-border-gray-200 focus:tw-border-gray-500 focus:tw-ring-0 tw-rounded-lg tw-shadow-sm","onUpdate:modelValue":s[1]||(s[1]=t=>j.value=t)},null,512),[[D,j.value]])])])]),e("div",xt,[e("div",_t,[e("button",{onClick:s[2]||(s[2]=(...t)=>a.clearFilters&&a.clearFilters(...t)),class:"tw-flex tw-px-8 tw-py-3 tw-text-gray-700 tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-white tw-border-2 tw-border-gray-700 tw-justify-center"}," LIMPAR FILTROS ")]),e("div",vt,[e("button",{onClick:H,class:"tw-flex tw-flex-1 tw-py-3 tw-text-primary tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-white tw-border-2 tw-border-primary tw-justify-center"}," CANCELAR "),e("button",{onClick:s[3]||(s[3]=(...t)=>a.applyFilters&&a.applyFilters(...t)),class:"tw-flex tw-flex-1 tw-py-3 tw-text-white tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-primary tw-border-2 tw-border-primary tw-justify-center"}," APLICAR FILTROS ")])])]),_:1}),o(b,{align:"right"})]),_:1})]),_:1},8,["modelValue"]),o(n,{modelValue:g.value,"onUpdate:modelValue":s[6]||(s[6]=t=>g.value=t)},{default:l(()=>[o(f,{style:{"min-width":"40vw","max-width":"380px","border-radius":"20px",padding:"50px"}},{default:l(()=>[o(u,null,{default:l(()=>[gt]),_:1}),o(u,{class:"q-p-none"},{default:l(()=>[e("div",bt,[e("div",ht,[e("button",{onClick:s[5]||(s[5]=t=>g.value=!1),class:"tw-flex tw-flex-1 tw-py-3 tw-text-primary tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-white tw-border-2 tw-border-primary tw-justify-center"}," CANCELAR "),e("button",{onClick:Y,class:"tw-flex tw-flex-1 tw-py-3 tw-text-white tw-text-sm tw-uppercase tw-rounded-md tw-font-title tw-font-semibold tw-bg-primary tw-border-2 tw-border-primary tw-justify-center"}," EXCLUIR ")])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e("div",yt,[e("div",Ct,[e("div",kt,[qt,o(w(A),{href:a.route("painel.gestao.permissoes.create")},{default:l(()=>[o(T,{class:"tw-text-white tw-bg-green-500 tw-items-center"},{default:l(()=>[o(w(v),{icon:"icon-park-outline:add",class:"tw-h-6 tw-w-6 tw-text-white tw-mr-2"}),p(" ADICIONAR PERMISSOES ")]),_:1})]),_:1},8,["href"])]),e("div",jt,[e("div",Vt,[Q.value?(c(),y(i,{key:0,size:"lg",icon:w(z),outline:"",clickable:"",onClick:a.removeFilterMunicipio,color:"green","text-color":"green"},{default:l(()=>[p(" Municipio ")]),_:1},8,["icon","onClick"])):F("",!0),W.value?(c(),y(i,{key:1,size:"lg",icon:w(z),outline:"",clickable:"",onClick:a.removeFilterCriacao,color:"green","text-color":"green"},{default:l(()=>[p(" Data de Criação ")]),_:1},8,["icon","onClick"])):F("",!0)]),e("div",Et,[e("div",Rt,[e("h5",{onClick:et,class:"tw-text-gray-700 tw-cursor-pointer tw-flex tw-flex-row tw-text-lg tw-font-body tw-justify-center tw-gap-2"},[o(w(v),{icon:"tabler:file-export",class:"tw-h-6 tw-w-6"}),p(" Exportar CSV ")])]),e("div",St,[o(w(v),{icon:"majesticons:search-line",class:"tw-h-6 tw-w-6 tw-text-gray-600"}),S(e("input",{id:"busca",type:"text",placeholder:"Pesquise aqui",required:"",autofocus:"",autocomplete:"busca",class:"tw-appearance-none tw-border-none tw-w-full tw-text-gray-700","onUpdate:modelValue":s[7]||(s[7]=t=>q.value=t)},null,512),[[D,q.value]])])])]),e("div",Ut,[e("div",At,[e("div",It,[o(lt,{flat:"","wrap-cells":"",rows:E.value,"onUpdate:rows":s[8]||(s[8]=t=>E.value=t),columns:J,"visible-columns":K,"row-key":"id",filter:q.value,"no-data-label":"Não há informações cadastradas.","no-results-label":"Não foi possível localizar informações com o filtro inserido.","rows-per-page-label":"Registros por página",pagination:L.value,"onUpdate:pagination":s[9]||(s[9]=t=>L.value=t),"pagination-label":(t,r,$)=>`${t} à ${r} de ${$} registros`,"selected-rows-label":t=>t+" registro(s) selecionado(s)",selected:_.value,"onUpdate:selected":s[10]||(s[10]=t=>_.value=t),selection:"multiple"},{header:l(t=>[o(P,{props:t,class:"tw-h-20"},{default:l(()=>[o(R,{"auto-width":""},{default:l(()=>[o(N,{dense:"",modelValue:t.selected,"onUpdate:modelValue":r=>t.selected=r},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),(c(!0),x(h,null,U(t.cols,r=>(c(),y(ot,{key:r.name,props:t},{default:l(()=>[e("span",Mt,I(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(t=>[o(P,{props:t,"no-hover":"",class:"roundful tw-overflow-hidden tw-rounded-lg hover:tw-bg-green-100 tw-h-20 tw-transition-colors"},{default:l(()=>[o(R,{"auto-width":""},{default:l(()=>[o(N,{dense:"",modelValue:t.selected,"onUpdate:modelValue":r=>t.selected=r},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),(c(!0),x(h,null,U(t.cols,r=>(c(),y(R,{key:r.name,props:t},{default:l(()=>[r.name==="actions"?(c(),x("div",Lt,[o(T,{class:"tw-text-black tw-text-lg"},{default:l(()=>[p("... "),o(st,{"auto-close":""},{default:l(()=>[e("div",Nt,[o(w(A),{href:a.route("painel.gestao.permissoes.show",t.row.id),title:"Info",class:"tw-flex hover:tw-bg-gray-100 flex-row tw-p-2 z-10 tw-justify-right tw-items-center"},{default:l(()=>[o(w(v),{icon:"arcticons:searchbar-ex",class:"tw-h-6 tw-w-6"}),p("  Visualizar ")]),_:2},1032,["href"]),o(w(A),{href:a.route("painel.gestao.permissoes.editar",t.row.id),title:"Editar",class:"tw-flex hover:tw-bg-gray-100 flex-row tw-p-2 z-10 tw-justify-right tw-items-center"},{default:l(()=>[o(w(v),{icon:"arcticons:simpletexteditor",class:"tw-h-6 tw-w-6"}),p("  Editar ")]),_:2},1032,["href"]),e("span",{onClick:$=>tt(t.row),title:"Deletar",class:"tw-flex hover:tw-bg-gray-100 flex-row tw-p-2 tw-justify-right tw-items-center"},[o(w(v),{icon:"arcticons:trashcan",class:"tw-h-6 tw-w-6"}),p("  Excluir ")],8,Pt)])]),_:2},1024)]),_:2},1024)])):(c(),x("div",$t,I(r.value),1))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","filter","pagination","pagination-label","selected-rows-label","selected"])])])])])])]),_:1})],64)}}};export{Ht as default};
